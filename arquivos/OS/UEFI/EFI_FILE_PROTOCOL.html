<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.13.2" />
		<meta name="keywords" content="EFI FILE PROTOCOL,EFI BLOCK IO PROTOCOL,EFI DISK IO PROTOCOL,EFI FILE INFO,EFI FILE SYSTEM INFO,EFI GUID" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/wiki/opensearch_desc.php" title="PhoenixWiki (en)" />
		<link rel="alternate" type="application/rss+xml" title="PhoenixWiki RSS Feed" href="http://wiki.phoenix.com/wiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="PhoenixWiki Atom Feed" href="http://wiki.phoenix.com/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>EFI FILE PROTOCOL - PhoenixWiki</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "/wiki/skins/common/shared.css?164";
			@import "/wiki/skins/phoenixskin_green/main.css?164";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="/wiki/skins/common/commonPrint.css?164" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/wiki/skins/phoenixskin_green/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/wiki/skins/phoenixskin_green/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/wiki/skins/phoenixskin_green/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/wiki/skins/phoenixskin_green/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "phoenixskin_green";
var stylepath = "/wiki/skins";
var wgArticlePath = "/wiki/index.php/$1";
var wgScriptPath = "/wiki";
var wgScript = "/wiki/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://wiki.phoenix.com";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "EFI_FILE_PROTOCOL";
var wgTitle = "EFI FILE PROTOCOL";
var wgAction = "view";
var wgArticleId = "158";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "3282";
var wgVersion = "1.13.2";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</script>
                
		<script type="text/javascript" src="/wiki/skins/common/wikibits.js?164"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/wiki/skins/common/ajax.js?164"></script>
		<script type="text/javascript" src="/wiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=phoenixskin_green"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/wiki/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php?title=MediaWiki:Phoenixskin_green.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php?title=-&action=raw&gen=css&maxage=18000&useskin=phoenixskin_green";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-EFI_FILE_PROTOCOL">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">EFI FILE PROTOCOL</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From PhoenixWiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p>Provides file based access to supported file systems.
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Protocol_Interface_Structure"><span class="tocnumber">1</span> <span class="toctext">Protocol Interface Structure</span></a></li>
<li class="toclevel-1"><a href="#Members"><span class="tocnumber">2</span> <span class="toctext">Members</span></a></li>
<li class="toclevel-1"><a href="#Description"><span class="tocnumber">3</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2"><a href="#Open.28.29"><span class="tocnumber">3.1</span> <span class="toctext">Open()</span></a></li>
<li class="toclevel-2"><a href="#Close.28.29"><span class="tocnumber">3.2</span> <span class="toctext">Close()</span></a></li>
<li class="toclevel-2"><a href="#Delete.28.29"><span class="tocnumber">3.3</span> <span class="toctext">Delete()</span></a></li>
<li class="toclevel-2"><a href="#Read.28.29"><span class="tocnumber">3.4</span> <span class="toctext">Read()</span></a></li>
<li class="toclevel-2"><a href="#Write.28.29"><span class="tocnumber">3.5</span> <span class="toctext">Write()</span></a></li>
<li class="toclevel-2"><a href="#SetPosition.28.29"><span class="tocnumber">3.6</span> <span class="toctext">SetPosition()</span></a></li>
<li class="toclevel-2"><a href="#GetPosition.28.29"><span class="tocnumber">3.7</span> <span class="toctext">GetPosition()</span></a></li>
<li class="toclevel-2"><a href="#GetInfo.28.29"><span class="tocnumber">3.8</span> <span class="toctext">GetInfo()</span></a></li>
<li class="toclevel-2"><a href="#SetInfo.28.29"><span class="tocnumber">3.9</span> <span class="toctext">SetInfo()</span></a></li>
<li class="toclevel-2"><a href="#Flush.28.29"><span class="tocnumber">3.10</span> <span class="toctext">Flush()</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Protocol_Interface_Structure"></a><h1> <span class="mw-headline">Protocol Interface Structure</span></h1>
<pre>typedef struct _EFI_FILE_PROTOCOL {
  UINT64                Revision;
  EFI_FILE_OPEN         <a href="#Open.28.29" title="">Open</a>;
  EFI_FILE_CLOSE        <a href="#Close.28.29" title="">Close</a>;
  EFI_FILE_DELETE       <a href="#Delete.28.29" title="">Delete</a>;
  EFI_FILE_READ         <a href="#Read.28.29" title="">Read</a>;
  EFI_FILE_WRITE        <a href="#Write.28.29" title="">Write</a>;
  EFI_FILE_GET_POSITION <a href="#GetPosition.28.29" title="">GetPosition</a>;
  EFI_FILE_SET_POSITION <a href="#SetPosition.28.29" title="">SetPosition</a>;
  EFI_FILE_GET_INFO     <a href="#GetInfo.28.29" title="">GetInfo</a>;
  EFI_FILE_SET_INFO     <a href="#SetInfo.28.29" title="">SetInfo</a>;
  EFI_FILE_FLUSH        <a href="#Flush.28.29" title="">Flush</a>;
} EFI_FILE_PROTOCOL;
</pre>
<pre>#define EFI_FILE_PROTOCOL_REVISION 0x00010000
</pre>
<a name="Members"></a><h1> <span class="mw-headline">Members</span></h1>
<table class="wikitable">
<tr>
<th> Member
</th><th> Description
</th></tr>
<tr>
<td> Revision
</td><td> The version of the <strong class="selflink">EFI_FILE_PROTOCOL</strong> interface. The version specified by this specification is 0x00010000. Future versions are required to be backward compatible to version 1.0.
</td></tr>
<tr>
<td> Open
</td><td> Opens or creates a new file.
</td></tr>
<tr>
<td> Close
</td><td> Closes the current file handle.
</td></tr>
<tr>
<td> Delete
</td><td> Deletes a file.
</td></tr>
<tr>
<td> Read
</td><td> Reads bytes from a file.
</td></tr>
<tr>
<td> Write
</td><td> Writes bytes to a file.
</td></tr>
<tr>
<td> GetPosition
</td><td> Returns the current file position.
</td></tr>
<tr>
<td> SetPosition
</td><td> Sets the current file position.
</td></tr>
<tr>
<td> GetInfo
</td><td> Gets the requested file or volume information.
</td></tr>
<tr>
<td> SetInfo
</td><td> Sets the requested file information.
</td></tr>
<tr>
<td> Flush
</td><td> Flushes all modified data associated with the file to the device.
</td></tr></table>
<a name="Description"></a><h1> <span class="mw-headline">Description</span></h1>
<p>The <strong class="selflink">EFI_FILE_PROTOCOL</strong> provides file IO access to supported file systems.
</p><p>An <strong class="selflink">EFI_FILE_PROTOCOL</strong> provides access to a file’s or directory’s contents, and is also a reference to a location in the directory tree of the file system in which the file resides. With any given file handle, other files may be opened relative to this file’s location, yielding new file handles.
</p><p>On requesting the file system protocol on a device, the caller gets the <strong class="selflink">EFI_FILE_PROTOCOL</strong> to the volume. This interface is used to open the root directory of the file system when needed. The caller must <a href="#Close.28.29" title="">Close()</a> the file handle to the root directory, and any other opened file handles before exiting. While there are open files on the device, usage of underlying device protocol(s) that the file system is abstracting must be avoided. For example, when a file system that is layered on a <a href="/wiki/index.php/EFI_DISK_IO_PROTOCOL" title="EFI DISK IO PROTOCOL">EFI_DISK_IO_PROTOCOL</a> / <a href="/wiki/index.php/EFI_BLOCK_IO_PROTOCOL" title="EFI BLOCK IO PROTOCOL">EFI_BLOCK_IO_PROTOCOL</a>, direct block access to the device for the blocks that comprise the file system must be avoided while there are open file handles to the same device.
</p><p>A file system driver may cache data relating to an open file. A <a href="#Flush.28.29" title="">Flush()</a> function is provided that flushes all dirty data in the file system, relative to the requested file, to the physical medium. If the underlying device may cache data, the file system must inform the device to flush as well.
</p>
<a name="Open.28.29"></a><h2> <span class="mw-headline">Open()</span></h2>
<p>Opens a new file relative to the source file’s location.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_OPEN) (
  IN  <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This,
  OUT <strong class="selflink">EFI_FILE_PROTOCOL</strong> **NewHandle,
  IN  CHAR16            *FileName,
  IN  UINT64            OpenMode,
  IN  UINT64            Attributes
  );
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle to the source location. This would typically be an open handle to a directory.
</td></tr>
<tr>
<td> NewHandle
</td><td> A pointer to the location to return the opened handle for the new file.
</td></tr>
<tr>
<td> FileName
</td><td> The Null-terminated string of the name of the file to be opened. The file name may contain the following path modifiers: “\”, “.”, and “..”.
</td></tr>
<tr>
<td> OpenMode
</td><td> The mode to open the file. The only valid combinations that the file may be opened with are: Read, Read/Write, or Create/Read/Write. See “Related Definitions” below.
</td></tr>
<tr>
<td> Attributes
</td><td> Only valid for EFI_FILE_MODE_CREATE, in which case these are the attribute bits for the newly created file. See “Related Definitions” below.
</td></tr></table>
<p><b>Related Definitions</b><br />
</p>
<pre>#define EFI_FILE_MODE_READ 0x0000000000000001
#define EFI_FILE_MODE_WRITE 0x0000000000000002
#define EFI_FILE_MODE_CREATE 0x8000000000000000
</pre>
<pre>#define EFI_FILE_READ_ONLY 0x0000000000000001
#define EFI_FILE_HIDDEN 0x0000000000000002
#define EFI_FILE_SYSTEM 0x0000000000000004
#define EFI_FILE_RESERVED 0x0000000000000008
#define EFI_FILE_DIRECTORY 0x0000000000000010
#define EFI_FILE_ARCHIVE 0x0000000000000020
#define EFI_FILE_VALID_ATTR 0x0000000000000037
</pre>
<p><b>Description</b><br />
The Open()function opens the file or directory referred to by FileName relative to the location of This and returns a NewHandle. The FileName may include the following path modifiers:
</p>
<ul><li> “\” If the filename starts with a “\” the relative location is the root directory that This residues on; otherwise “\” separates name components. Each name component is opened in turn, and the handle to the last file opened is returned.
</li><li> “.” Opens the current location.
</li><li> “..” Opens the parent directory for the current location. If the location is the root directory the request will return an error, as there is no parent directory for the root directory.
</li></ul>
<p>If EFI_FILE_MODE_CREATE is set, then the file is created in the directory. If the final location of FileName does not refer to a directory, then the operation fails. If the file does not exist in the directory, then a new file is created. If the file already exists in the directory, then the existing file is opened.
</p><p>If the medium of the device changes, all accesses (including the File handle) will result in EFI_MEDIA_CHANGED. To access the new medium, the volume must be reopened.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The file was opened.
</td></tr>
<tr>
<td> EFI_NOT_FOUND
</td><td> The specified file could not be found on the device.
</td></tr>
<tr>
<td> EFI_NO_MEDIA
</td><td> The device has no medium.
</td></tr>
<tr>
<td> EFI_MEDIA_CHANGED
</td><td> The device has a different medium in it or the medium is no longer supported.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> The device reported an error.
</td></tr>
<tr>
<td> EFI_VOLUME_CORRUPTED
</td><td> The file system structures are corrupted.
</td></tr>
<tr>
<td> EFI_WRITE_PROTECTED
</td><td> An attempt was made to create a file, or open a file for write when the media is write-protected.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> The service denied access to the file.
</td></tr>
<tr>
<td> EFI_OUT_OF_RESOURCES
</td><td> Not enough resources were available to open the file.
</td></tr>
<tr>
<td> EFI_VOLUME_FULL
</td><td> The volume is full.
</td></tr></table>
<a name="Close.28.29"></a><h2> <span class="mw-headline">Close()</span></h2>
<p>Closes a specified file handle.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_CLOSE) (IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle to close.
</td></tr></table>
<p><b>Description</b><br />
The Close() function closes a specified file handle. All “dirty” cached file data is flushed to the device, and the file is closed. In all cases the handle is closed.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The file was closed.
</td></tr></table>
<a name="Delete.28.29"></a><h2> <span class="mw-headline">Delete()</span></h2>
<p>Closes and deletes a file.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_DELETE) (IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the handle to the file to delete.
</td></tr></table>
<p><b>Description</b><br />
The Delete() function closes and deletes a file. In all cases the file handle is closed. If the file cannot be deleted, the warning code EFI_WARN_DELETE_FAILURE is returned, but the handle is still closed.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The file was closed and deleted, and the handle was closed.
</td></tr>
<tr>
<td> EFI_WARN_DELETE_FAILURE
</td><td> The handle was closed, but the file was not deleted.
</td></tr></table>
<a name="Read.28.29"></a><h2> <span class="mw-headline">Read()</span></h2>
<p>Reads data from a file.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_READ) (
  IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This,
  IN OUT UINTN *BufferSize,
  OUT VOID *Buffer);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle to read data from.
</td></tr>
<tr>
<td> BufferSize
</td><td> On input, the size of the Buffer. On output, the amount of data returned in Buffer. In both cases, the size is measured in bytes.
</td></tr>
<tr>
<td> Buffer
</td><td> The buffer into which the data is read.
</td></tr></table>
<p><b>Description</b><br />
The Read() function reads data from a file.
</p><p>If This is not a directory, the function reads the requested number of bytes from the file at the file’s current position and returns them in Buffer. If the read goes beyond the end of the file, the read length is truncated to the end of the file. The file’s current position is increased by the number of bytes returned.
</p><p>If This is a directory, the function reads the directory entry at the file’s current position and returns the entry in Buffer. 
</p><p>If the Buffer is not large enough to hold the current directory entry, then EFI_BUFFER_TOO_SMALL is returned and the current file position is not updated. BufferSize is set to be the size of the buffer needed to read the entry. On success, the current position is updated to the next directory entry. If there are no more directory entries, the read returns a zero-length buffer. <a href="/wiki/index.php/EFI_FILE_INFO" title="EFI FILE INFO">EFI_FILE_INFO</a> is the structure returned as the directory entry.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The data was read.
</td></tr>
<tr>
<td> EFI_NO_MEDIA
</td><td> The device has no medium.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> The device reported an error.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> An attempt was made to read from a deleted file.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> On entry, the current file position is beyond the end of the file.
</td></tr>
<tr>
<td> EFI_VOLUME_CORRUPTED
</td><td> The file system structures are corrupted.
</td></tr>
<tr>
<td> EFI_BUFFER_TOO_SMALL
</td><td> The BufferSize is too small to read the current directory entry. BufferSize has been updated with the size needed to complete the request.
</td></tr></table>
<a name="Write.28.29"></a><h2> <span class="mw-headline">Write()</span></h2>
<p>Writes data to a file.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_WRITE) (
  IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This,
  IN OUT UINTN *BufferSize,
  IN VOID *Buffer);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle to write data to.
</td></tr>
<tr>
<td> BufferSize
</td><td> On input, the size of the Buffer. On output, the amount of data actually written. In both cases, the size is measured in bytes.
</td></tr>
<tr>
<td> Buffer
</td><td> The buffer of data to write.
</td></tr></table>
<p><b>Description</b><br />
The Write() function writes the specified number of bytes to the file at the current file position. The current file position is advanced the actual number of bytes written, which is returned in BufferSize. Partial writes only occur when there has been a data error during the write attempt (such as “file space full”). The file is automatically grown to hold the data if required.
</p><p>Direct writes to opened directories are not supported.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The data was written.
</td></tr>
<tr>
<td> EFI_UNSUPPORTED
</td><td> Writes to open directory files are not supported.
</td></tr>
<tr>
<td> EFI_NO_MEDIA
</td><td> The device has no medium.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> The device reported an error.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> An attempt was made to write to a deleted file.
</td></tr>
<tr>
<td> EFI_VOLUME_CORRUPTED
</td><td> The file system structures are corrupted.
</td></tr>
<tr>
<td> EFI_WRITE_PROTECTED
</td><td> The file or medium is write-protected.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> The file was opened read only.
</td></tr>
<tr>
<td> EFI_VOLUME_FULL
</td><td> The volume is full.
</td></tr></table>
<a name="SetPosition.28.29"></a><h2> <span class="mw-headline">SetPosition()</span></h2>
<p>Sets a file’s current position.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_SET_POSITION) (
  IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This,
  IN UINT64 Position);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the he file handle to set the requested position on.
</td></tr>
<tr>
<td> Position
</td><td> The byte position from the start of the file to set.
</td></tr></table>
<p><b>Description</b><br />
The SetPosition() function sets the current file position for the handle to the position supplied. With the exception of seeking to position 0xFFFFFFFFFFFFFFFF, only absolute positioning is supported, and seeking past the end of the file is allowed (a subsequent write would grow the file). Seeking to position 0xFFFFFFFFFFFFFFFF causes the current position to be set to the end of the file.
</p><p>If This is a directory, the only position that may be set is zero. This has the effect of starting the read process of the directory entries over.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The position was set.
</td></tr>
<tr>
<td> EFI_UNSUPPORTED
</td><td> The seek request for nonzero is not valid on open directories.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> An attempt was made to set the position of a deleted file.
</td></tr></table>
<a name="GetPosition.28.29"></a><h2> <span class="mw-headline">GetPosition()</span></h2>
<p>Returns a file’s current position.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_GET_POSITION) (
  IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This,
  OUT UINT64 *Position);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle to get the current position on.
</td></tr>
<tr>
<td> Position
</td><td> The address to return the file’s current position value.
</td></tr></table>
<p><b>Description</b><br />
The GetPosition() function returns the current file position for the file handle. For directories, the current file position has no meaning outside of the file system driver and as such the operation is not supported. An error is returned if This is a directory.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The position was returned.
</td></tr>
<tr>
<td> EFI_UNSUPPORTED
</td><td> The request is not valid on open directories.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> An attempt was made to get the position from a deleted file.
</td></tr></table>
<a name="GetInfo.28.29"></a><h2> <span class="mw-headline">GetInfo()</span></h2>
<p>Returns information about a file.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_GET_INFO) (
  IN EFI_FILE_PROTOCOL *This,
  IN EFI_GUID *InformationType,
  IN OUT UINTN *BufferSize,
  OUT VOID *Buffer);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle the requested information is for.
</td></tr>
<tr>
<td> InformationType
</td><td> The type identifier for the information being requested. See the <a href="/wiki/index.php/EFI_FILE_INFO" title="EFI FILE INFO">EFI_FILE_INFO</a> and <a href="/wiki/index.php/EFI_FILE_SYSTEM_INFO" title="EFI FILE SYSTEM INFO">EFI_FILE_SYSTEM_INFO</a> descriptions for the related GUID definitions.
</td></tr>
<tr>
<td> BufferSize
</td><td> On input, the size of Buffer. On output, the amount of data returned in Buffer. In both cases, the size is measured in bytes.
</td></tr>
<tr>
<td> Buffer
</td><td> A pointer to the data buffer to return. The buffer’s type is indicated by InformationType.
</td></tr></table>
<p><b>Description</b><br />
The GetInfo() function returns information of type InformationType for the requested file. If the file does not support the requested information type, then EFI_UNSUPPORTED is returned. If the buffer is not large enough to fit the requested structure, EFI_BUFFER_TOO_SMALL is returned and the BufferSize is set to the size of buffer that is required to make the request.
</p><p>The information types defined by this specification are required information types that all file systems must support.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The information was set.
</td></tr>
<tr>
<td> EFI_UNSUPPORTED
</td><td> The InformationType is not known.
</td></tr>
<tr>
<td> EFI_NO_MEDIA
</td><td> The device has no medium.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> The device reported an error.
</td></tr>
<tr>
<td> EFI_VOLUME_CORRUPTED
</td><td> The file system structures are corrupted.
</td></tr>
<tr>
<td> EFI_BUFFER_TOO_SMALL
</td><td> The BufferSize is too small to read the current directory entry. BufferSize has been updated with the size needed to complete
<p>the request.
</p>
</td></tr></table>
<a name="SetInfo.28.29"></a><h2> <span class="mw-headline">SetInfo()</span></h2>
<p>Sets information about a file.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_SET_INFO) (
  IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This,
  IN <a href="/wiki/index.php/EFI_GUID" title="EFI GUID">EFI_GUID</a> *InformationType,
  IN UINTN BufferSize,
  IN VOID *Buffer);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle the information is for.
</td></tr>
<tr>
<td> InformationType
</td><td> The type identifier for the information being set. See the <a href="/wiki/index.php/EFI_FILE_INFO" title="EFI FILE INFO">EFI_FILE_INFO</a> and <a href="/wiki/index.php/EFI_FILE_SYSTEM_INFO" title="EFI FILE SYSTEM INFO">EFI_FILE_SYSTEM_INFO</a> descriptions in this section for the related GUID definitions.
</td></tr>
<tr>
<td> BufferSize
</td><td> The size, in bytes, of Buffer.
</td></tr>
<tr>
<td> Buffer
</td><td> A pointer to the data buffer to write. The buffer’s type is indicated by InformationType.
</td></tr></table>
<p><b>Description</b><br />
The SetInfo() function sets information of type InformationType on the requested file. Because a read-only file can be opened only in read-only mode, an InformationType of EFI_FILE_INFO_ID can be used with a read-only file because this method is the only one that can be used to convert a read-only file to a read-write file. In this circumstance, only the Attribute field of the EFI_FILE_INFO structure may be modified. One or more calls to SetInfo() to change the Attribute field are permitted before it is closed. The file attributes will be valid the next time the file is opened with Open().
</p><p>An InformationType of EFI_FILE_SYSTEM_INFO_ID or EFI_FILE_SYSTEM_VOLUME_LABEL_ID may not be used on read-only media.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The information was set.
</td></tr>
<tr>
<td> EFI_UNSUPPORTED
</td><td> The InformationType is not known.
</td></tr>
<tr>
<td> EFI_NO_MEDIA
</td><td> The device has no medium.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> The device reported an error.
</td></tr>
<tr>
<td> EFI_VOLUME_CORRUPTED
</td><td> The file system structures are corrupted.
</td></tr>
<tr>
<td> EFI_WRITE_PROTECTED
</td><td> InformationType is EFI_FILE_INFO_ID and the media is read-only.
</td></tr>
<tr>
<td> EFI_WRITE_PROTECTED
</td><td> InformationType is EFI_FILE_PROTOCOL_SYSTEM_INFO_ID and the media is read only.
</td></tr>
<tr>
<td> EFI_WRITE_PROTECTED
</td><td> InformationType is EFI_FILE_SYSTEM_VOLUME_LABEL_ID and the media is read-only.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> An attempt is made to change the name of a file to a file that is already present.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> An attempt is being made to change the EFI_FILE_DIRECTORY Attribute.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> An attempt is being made to change the size of a directory.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> InformationType is EFI_FILE_INFO_ID and the file was opened read-only and an attempt is being made to modify a field other than Attribute.
</td></tr>
<tr>
<td> EFI_VOLUME_FULL
</td><td> The volume is full.
</td></tr>
<tr>
<td> EFI_BAD_BUFFER_SIZE
</td><td> BufferSize is smaller than the size of the type indicated by InformationType.
</td></tr></table>
<a name="Flush.28.29"></a><h2> <span class="mw-headline">Flush()</span></h2>
<p>Flushes all modified data associated with a file to a device.
</p><p><b>Prototype</b><br />
</p>
<pre>typedef
EFI_STATUS
(EFIAPI *EFI_FILE_FLUSH) (IN <strong class="selflink">EFI_FILE_PROTOCOL</strong> *This);
</pre>
<p><b>Parameters</b><br />
</p>
<table class="wikitable">
<tr>
<th> Parameter
</th><th> Description
</th></tr>
<tr>
<td> This
</td><td> A pointer to the <strong class="selflink">EFI_FILE_PROTOCOL</strong> instance that is the file handle to flush.
</td></tr></table>
<p><b>Description</b><br />
The Flush() function flushes all modified data associated with a file to a device.
</p><p><b>Status Codes Returned</b><br />
</p>
<table class="wikitable">
<tr>
<th> Status Code
</th><th> Description
</th></tr>
<tr>
<td> EFI_SUCCESS
</td><td> The data was flushed.
</td></tr>
<tr>
<td> EFI_NO_MEDIA
</td><td> The device has no medium.
</td></tr>
<tr>
<td> EFI_DEVICE_ERROR
</td><td> The device reported an error.
</td></tr>
<tr>
<td> EFI_VOLUME_CORRUPTED
</td><td> The file system structures are corrupted.
</td></tr>
<tr>
<td> EFI_WRITE_PROTECTED
</td><td> The file or medium is write-protected.
</td></tr>
<tr>
<td> EFI_ACCESS_DENIED
</td><td> The file was opened read-only.
</td></tr>
<tr>
<td> EFI_VOLUME_FULL
</td><td> The volume is full.
</td></tr></table>
<hr />
<p>Copyright (C) 2009 Phoenix Technologies Ltd. All Rights Reserved. Portions (C) 2006-2008 UEFI Forum, Inc. Used by permission.
</p>
<!-- 
NewPP limit report
Preprocessor node count: 55/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:158-0!1!0!!en!2!edit=0 and timestamp 20181120164041 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.phoenix.com/wiki/index.php/EFI_FILE_PROTOCOL">http://wiki.phoenix.com/wiki/index.php/EFI_FILE_PROTOCOL</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/wiki/index.php/Special:Categories" title="Special:Categories">Categories</a>:&#32;<span dir='ltr'><a href="/wiki/index.php/Category:SecureCore_Tiano%28TM%29_2.0" title="Category:SecureCore Tiano(TM) 2.0">SecureCore Tiano(TM) 2.0</a></span> | <span dir='ltr'><a href="/wiki/index.php/Category:UEFI_2.0" title="Category:UEFI 2.0">UEFI 2.0</a></span></div></div>			<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/wiki/index.php/EFI_FILE_PROTOCOL" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="/wiki/index.php?title=Talk:EFI_FILE_PROTOCOL&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-viewsource"><a href="/wiki/index.php?title=EFI_FILE_PROTOCOL&amp;action=edit" title="This page is protected.&#10;You can view its source. [e]" accesskey="e">View source</a></li>
				 <li id="ca-history"><a href="/wiki/index.php?title=EFI_FILE_PROTOCOL&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/wiki/index.php?title=Special:UserLogin&amp;returnto=EFI_FILE_PROTOCOL" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://colo-www2/wiki/logo/phoenixlogo.png);" href="/wiki/index.php/Main_Page" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/wiki/index.php/Main_Page">Main Page</a></li>
				<li id="n-portal"><a href="/wiki/index.php/PhoenixWiki:Community_Portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="/wiki/index.php/PhoenixWiki:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="/wiki/index.php/Special:RecentChanges" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="/wiki/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="/wiki/index.php/Help:Contents" title="The place to find out.">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/wiki/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search PhoenixWiki [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/wiki/index.php/Special:WhatLinksHere/EFI_FILE_PROTOCOL" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/wiki/index.php/Special:RecentChangesLinked/EFI_FILE_PROTOCOL" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="/wiki/index.php/Special:Upload" title="Upload files [u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="/wiki/index.php/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/wiki/index.php?title=EFI_FILE_PROTOCOL&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/wiki/index.php?title=EFI_FILE_PROTOCOL&amp;oldid=3282" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified on 11 December 2009, at 19:01.</li>

				<li id="viewcount">This page has been accessed 63,742 times.</li>

				<li id="privacy"><a href="/wiki/index.php/PhoenixWiki:Privacy_policy" title="PhoenixWiki:Privacy policy">Privacy policy</a></li>

				<li id="about"><a href="/wiki/index.php/PhoenixWiki:About" title="PhoenixWiki:About">About PhoenixWiki</a></li>

				<li id="disclaimer"><a href="/wiki/index.php/PhoenixWiki:General_disclaimer" title="PhoenixWiki:General disclaimer">Disclaimers</a></li>

				<li id="support"><a href='mailto:devsupport@phoenix.com'>Support</a></li>

			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.351 secs. --></body></html>
