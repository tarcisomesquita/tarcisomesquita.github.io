(()=>{var t,e,r,n,o={532:(t,e,r)=>{"use strict";var n;(n="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?r.g:self).Proxy||(n.Proxy=r(780)(),n.Proxy.revocable=n.Proxy.revocable)},780:t=>{t.exports=function(){let t,e=null;function r(t){return!!t&&("object"==typeof t||"function"==typeof t)}function n(t){if(null!==t&&!r(t))throw new TypeError("Object prototype may only be an Object or null: "+t)}const o=Object,i=Boolean(o.create)||!({__proto__:null}instanceof o),a=o.create||(i?function(t){return n(t),{__proto__:t}}:function(t){if(n(t),null===t)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var e=function(){};return e.prototype=t,new e}),s=function(){return null},l=o.getPrototypeOf||([].__proto__===Array.prototype?function(t){const e=t.__proto__;return r(e)?e:null}:s);return t=function(c,u){if(void 0===(this&&this instanceof t?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!r(c)||!r(u))throw new TypeError("Cannot create proxy with a non-object as target or handler");let f=function(){};e=function(){c=null,f=function(t){throw new TypeError(`Cannot perform '${t}' on a proxy that has been revoked`)}},setTimeout((function(){e=null}),0);const h=u;u={get:null,set:null,apply:null,construct:null};for(let t in h){if(!(t in u))throw new TypeError(`Proxy polyfill does not support trap '${t}'`);u[t]=h[t]}"function"==typeof h&&(u.apply=h.apply.bind(h));const d=l(c);let _,p=!1,g=!1;"function"==typeof c?(_=function(){const t=this&&this.constructor===_,e=Array.prototype.slice.call(arguments);return f(t?"construct":"apply"),t&&u.construct?u.construct.call(this,c,e):!t&&u.apply?u.apply(c,this,e):t?(e.unshift(c),new(c.bind.apply(c,e))):c.apply(this,e)},p=!0):c instanceof Array?(_=[],g=!0):_=i||null!==d?a(d):{};const w=u.get?function(t){return f("get"),u.get(this,t,_)}:function(t){return f("get"),this[t]},y=u.set?function(t,e){f("set"),u.set(this,t,e,_)}:function(t,e){f("set"),this[t]=e},b=o.getOwnPropertyNames(c),m={};b.forEach((function(t){if((p||g)&&t in _)return;const e=o.getOwnPropertyDescriptor(c,t),r={enumerable:Boolean(e.enumerable),get:w.bind(c,t),set:y.bind(c,t)};o.defineProperty(_,t,r),m[t]=!0}));let v=!0;if(p||g){const t=o.setPrototypeOf||([].__proto__===Array.prototype?function(t,e){return n(e),t.__proto__=e,t}:s);d&&t(_,d)||(v=!1)}if(u.get||!v)for(let t in c)m[t]||o.defineProperty(_,t,{get:w.bind(c,t)});return o.seal(c),o.seal(_),_},t.revocable=function(r,n){return{proxy:new t(r,n),revoke:e}},t}},196:t=>{!function(){"use strict";t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var r,n=t.HTMLElement||t.Element,o=468,i={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:n.prototype.scroll||l,scrollIntoView:n.prototype.scrollIntoView},a=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,s=(r=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?_.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):i.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?i.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):_.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var t=arguments[0].left,e=arguments[0].top;_.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var r=function(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}(this),n=r.getBoundingClientRect(),o=this.getBoundingClientRect();r!==e.body?(_.call(this,r,r.scrollLeft+o.left-n.left,r.scrollTop+o.top-n.top),"fixed"!==t.getComputedStyle(r).position&&t.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):t.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function l(t,e){this.scrollLeft=t,this.scrollTop=e}function c(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(t,e){return"Y"===e?t.clientHeight+s<t.scrollHeight:"X"===e?t.clientWidth+s<t.scrollWidth:void 0}function f(e,r){var n=t.getComputedStyle(e,null)["overflow"+r];return"auto"===n||"scroll"===n}function h(t){var e=u(t,"Y")&&f(t,"Y"),r=u(t,"X")&&f(t,"X");return e||r}function d(e){var r,n,i,s,l=(a()-e.startTime)/o;s=l=l>1?1:l,r=.5*(1-Math.cos(Math.PI*s)),n=e.startX+(e.x-e.startX)*r,i=e.startY+(e.y-e.startY)*r,e.method.call(e.scrollable,n,i),n===e.x&&i===e.y||t.requestAnimationFrame(d.bind(t,e))}function _(r,n,o){var s,c,u,f,h=a();r===e.body?(s=t,c=t.scrollX||t.pageXOffset,u=t.scrollY||t.pageYOffset,f=i.scroll):(s=r,c=r.scrollLeft,u=r.scrollTop,f=l),d({scrollable:s,method:f,startTime:h,startX:c,startY:u,x:n,y:o})}}}}()},12:(t,e,r)=>{"use strict";r.a(t,(async(t,e)=>{try{r(509);var n=r(195),o=r(948),i=r(484),a=r(422),s=t([a]);let l,c;a=(s.then?(await s)():s)[0];class u extends Error{}async function f(t,e){l&&l.abort(),l=new AbortController;const r=l.signal;try{return await new n.T(t).captureTab(r,e)||void 0}catch(t){throw new u("captureTab aborted")}}async function h(){let t=(await i.lO.getKeys()).filter((t=>t.startsWith("cartographer_")));return i.lO.get(...t)}async function d(){console.log("background process terminated: reinitializing"),(0,a.G_)();let t=await h();for(let e in t)t.hasOwnProperty(e)&&(0,a.qX)(t[e]);console.log("index successfully loaded!")}browser.runtime.onMessage.addListener((t=>{if("captureTab"===t._)return f(t.tabId,t.quality)}));let _={};const p=async({tabId:t,url:e})=>{if(_.hasOwnProperty(t)){if(_[t]===e)return;_[t]=e}else _[t]=e;let r,n=new Date;try{try{r=await(0,o.V)(t,"packd",{action:"innerText"})}catch(n){console.error(`could not contact tab ${t}, error: ${n}`),console.error("falling back on title+url");let o=await browser.tabs.get(t);r={innerText:"",title:o.title,url:e}}}catch(e){return void console.log(`could not index tab ${t}, error: ${e}`)}let s=c;c=new Promise((async(e,o)=>{try{s&&await s,(0,a.J5)()&&await d(),await i.lO.hasOne("cartographerStats")||await i.lO.set("cartographerStats",'{"totalDocs": 0, "lengthAvg": 0, "occurences": {}}');let o=await i.lO.getOne("cartographerStats"),l=await i.lO.getOne(`cartographer_${t}`);if(l){let{stats:e}=(0,a.wg)(l,o);o=JSON.stringify(e),(0,a.Zl)(t.toString())}let c=(0,a.Pe)(t.toString(),r.innerText,r.title,r.url,o),u=JSON.stringify(c.doc);await i.lO.set("cartographerStats",JSON.stringify(c.stats)),await i.lO.set(`cartographer_${t}`,u),(0,a.qX)(u);let f=new Date;console.log("indexing took "+(f-n)+"ms"),e()}catch(r){console.log(`could not index tab ${t}, error: ${r}`),e()}}))};async function g(t,e){let r={};for(let n=0;n<t.length;n+=10){if(e.aborted)throw new u("search aborted");const o=t.slice(n,n+10);Object.assign(r,(0,a.P)(o.join(","),o.length))}if(e.aborted)throw new u("search aborted");await browser.runtime.sendMessage({_:"search",results:r})}let w;async function y(t,e){w&&w.abort(),w=new AbortController;const r=w.signal;let n=await i.lO.getOne("cartographerStats");(0,a.mg)(n);let o=(0,a.xj)(t);return g(e,r),o}browser.webNavigation.onHistoryStateUpdated.addListener(p),browser.webNavigation.onReferenceFragmentUpdated.addListener(p),browser.webNavigation.onCompleted.addListener(p),browser.tabs.onUpdated.addListener(((t,{url:e},r)=>p({tabId:t,url:e}))),browser.tabs.onRemoved.addListener(((t,e)=>{let r=c;c=new Promise((async(e,n)=>{try{if(r&&await r,await i.lO.hasOne("cartographerStats")||await i.lO.set("cartographerStats",'{"totalDocs": 0, "lengthAvg": 0, "occurences": {}}'),await i.lO.hasOne(`cartographer_${t}`)){let e=await i.lO.getOne("cartographerStats"),r=await i.lO.getOne(`cartographer_${t}`),n=new Date,o=(0,a.wg)(r,e),s=new Date;await i.lO.set("cartographerStats",JSON.stringify(o.stats)),await i.lO.unset(`cartographer_${t}`),(0,a.Zl)(t.toString()),console.log(`unindexed ${t} in ${s-n}ms`)}e()}catch(r){console.log(`could not unindex tab ${t}, error: ${r}`),e()}}))})),browser.runtime.onMessage.addListener((t=>{if("search"===t._)return y(t.queryString,t.ids)})),e()}catch(b){e(b)}}))},509:(t,e,r)=>{"use strict";r.d(e,{S:()=>i});var n=r(196),o=r.n(n);r(532);try{o().polyfill()}catch(t){console.log(t)}const i="firefox";let a;function s(t,e){var r=document.createRange(),n=window.getSelection();r.setStart(t,e),r.collapse(!0),n.removeAllRanges(),n.addRange(r)}a=window,Array.from||(Array.from=function(){let t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},r=Math.pow(2,53)-1;return function(t){let n=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");let o,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!e(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}let a,s=function(t){let e=function(t){let e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),r)}(n.length),l=e(this)?Object(new this(s)):new Array(s),c=0;for(;c<s;)a=n[c],l[c]=i?void 0===o?i(a,c):i.call(o,a,c):a,c+=1;return l.length=s,l}}()),a.t_delay=t=>new Promise((e=>setTimeout(e,t))),a.t_in=(t,e)=>t.hasOwnProperty(e),a.t_arrayBufferToBase64=function(t){let e="";return[].slice.call(new Uint8Array(t)).forEach((t=>e+=String.fromCharCode(t))),a.btoa(e)},a.t_getImage=function(t,e=!1){return new Promise(((r,n)=>{try{if(t.startsWith("chrome://"))r();else{let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){let t=o.getResponseHeader("Content-Type").trim();if(t.startsWith("image/")){let e="data:"+t+";charset=utf-8;base64,",n=t_arrayBufferToBase64(o.response);r(e+n)}else n('Image Request Failed: Content-Type is not an image! (Content-Type: "'+t+'")')}else n(this.status)},o.responseType="arraybuffer",o.open("GET",t,!0),e&&o.setRequestHeader("Cache-Control","no-store"),o.send()}}catch(t){n(t.message)}}))},a.t_ctrlCmdKey=function(){return navigator.platform.indexOf("Mac")>=0||"iPhone"===navigator.platform?"Meta":"Control"},a.t_getElementsBetween=function(t,e,r=t=>!0){if(!t.parentElement.isSameNode(e.parentElement))return;if(t.isSameNode(e))return[];let n=[],o=t=>t.nextElementSibling;t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING&&(o=t=>t.previousElementSibling);let i=o(t);for(;i&&!i.isSameNode(e);)r(i)&&n.push(i),i=o(i);return n},a.t_getInView=function(t,e,r){let n=e.getBoundingClientRect(),o=t.getBoundingClientRect();(n.y>o.y||n.y>o.y+o.height||o.y>=n.y+n.height||o.y+o.height>=n.y+n.height)&&t.scrollIntoView(r)},a.t_getCaretPosition=function(t){var e,r=0,n=t.ownerDocument||t.document,o=n.defaultView||n.parentWindow;if(void 0!==o.getSelection){if((e=o.getSelection()).rangeCount>0){var i=o.getSelection().getRangeAt(0),a=i.cloneRange();a.selectNodeContents(t),a.setEnd(i.endContainer,i.endOffset),r=a.toString().length}}else if((e=n.selection)&&"Control"!=e.type){var s=e.createRange(),l=n.body.createTextRange();l.moveToElementText(t),l.setEndPoint("EndToEnd",s),r=l.text.length}return r},a.t_setCaretPosition=function(t,e){let r=0,n=e;for(let o of t.childNodes)if(o.nodeType===Node.TEXT_NODE){if(r+=o.nodeValue.length,e<=r)return void s(o,n);n-=o.nodeValue.length}else if(o.nodeType===Node.ELEMENT_NODE){let t=o.innerText;if(r+=t.length,e<=r)return void t_setCaretPosition(o,n);n-=t.length}},a.t_stripHtml=function(t){return(new DOMParser).parseFromString(t,"text/html").body.textContent||""},a.t_byteLen=t=>new Blob([t]).size,a.t_chunkSubstr=function(t,e){const r=Math.ceil(t.length/e),n=new Array(r);for(let o=0,i=0;o<r;++o,i+=e)n[o]=t.substr(i,e);return n},a.t_chunkBytes=function(t,e){let r=Math.ceil(t_byteLen(t)/e),n=new Array(r),o=0;n[o]="";for(const r of t){let t=n[o]+r;t_byteLen(t)>e?(o++,o>=n.length&&n.push(""),n[o]=r):n[o]=t}return n},a.t_browserDetection=function(){return browser.runtime.getURL("/").startsWith("moz")?"moz":"chromium"},a.t_getKeyboardFocusableElements=(t=document)=>[...t.querySelectorAll('a[href], button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')].filter((t=>!t.hasAttribute("disabled")&&!t.getAttribute("aria-hidden"))),a.t_resetAnimation=function(t){t.style.animation="none",t.offsetHeight,t.style.animation=null},a.t_tryParseJSONObject=function(t){try{var e=JSON.parse(t);if(e&&"object"==typeof e)return e}catch(t){}return!1},a.t_sanitizeXMLTags=function(t){return t.replace(/<\/?([a-zA-Z0-9]+)>/g,(t=>t.replace("<","&lt;").replace(">","&gt;")))},a.t_errorToString=t=>`${t.toString()}\n${t.stack||"No stack trace available."}`},948:(t,e,r)=>{"use strict";function n(t,e,r){return browser.tabs.sendMessage(t,{target:e,data:r})}r.d(e,{V:()=>n}),r(509)},484:(t,e,r)=>{"use strict";function n(t,e){return"*"===e&&console.error("store: option id '*' is reserved! will lead to unexpected behavior"),"__"+t+"_$"+e}function o(t,e){return e.startsWith("__"+t+"_$")}function i(t,e){return e.substring(4+t.length,e.length)}r.d(e,{lO:()=>f}),r(509);const a=t=>n(t,"___DELONSTART");class s extends Error{}class l{constructor(t,e="conf",r=!1){this.type=t,this.name=e,this.tmp=r,this.__fulfillers={},this.__modifierPromises={}}async modify(t,e,r=!0){let o=this.__modifierPromises[t];return this.__modifierPromises[t]=new Promise((async(i,a)=>{try{o&&await o;let a=r?await this.getOne(t):void 0,s=e(a);s instanceof Promise&&(s=await s),void 0!==s&&await this.__set(n(this.name,t),s),i()}catch(e){console.error(`storage modification for property "${t}" failed with the following error:`),console.error(e),i()}})),this.__modifierPromises[t]}async modifyAll(t,e,...r){let n=r.map((t=>this.__modifierPromises[t])),o=new Promise((async(o,i)=>{try{for(let t of n)void 0!==t&&await t;let i=e?await this.get(...r):void 0,a=t(i);a instanceof Promise&&(a=await a),void 0!==a&&await this.__setAll(a),o()}catch(t){console.error(`storage modification for properties "${r}" failed with the following error:`),console.error(t),o()}}));for(let t of r)this.__modifierPromises[t]=o;return o}special(t){return n(this.name,t)}isSpecial(t){return o(this.name,t)}normal(t){return i(this.name,t)}__delOnStart(){return this.modify(a(this.name),(async()=>{let t=await this.__getOne(a(this.name));if(t)return console.log("[store] delOnStart exists: "),console.log(t),this.modifyAll((()=>(console.log("[store] deleting"),this.__unset(...t))),!1,...t).then((()=>this.__set(a(this.name),[])));this.__set(a(this.name),[])}),!1)}__chunkNumber(t,e,r="_part"){return parseInt(e.substring(t.length+r.length))}async storeLarge(t,e,r=8092){const n=t_chunkBytes(e,r),o=await this.getKeys();let i=[];for(let e of o)e.startsWith(t)&&this.__chunkNumber(t,e)>=n.length&&i.push(e);let a={};for(let[e,r]of n.entries())a[t+"_part"+e]=r;await this.unset(...i);try{await this.setAll(a,!0)}catch(t){throw await this.unset(...Object.keys(a)),new s("storeLarge failed! error: "+t)}}async retrieveLarge(t){const e=await this.getKeys();let r=[],n=0;for(let o of e)if(o.startsWith(t)){r.push(o);let e=this.__chunkNumber(t,o);e>n&&(n=e)}let o=await this.get(...r),i="";for(let e=0;e<=n;e++)i+=o[t+"_part"+e];return i}async hasOne(t){return t=n(this.name,t),(await browser.storage[this.type].get(t)).hasOwnProperty(t)}async has(...t){let e={};for(let r of t)e[r]=await this.hasOne(r);return e}unset(...t){return this.modifyAll((async()=>{let e=await this.__getOne(a(this.name));for(let r of t){let t=e.indexOf(r);-1!==t&&e.splice(t,1)}await this.__set(a(this.name),e),await this.__unset(...t)}),!1,a(this.name),...t)}async __unset(...t){return browser.storage[this.type].remove(t.map((t=>n(this.name,t))))}set(t,e){return this.modifyAll((async()=>{let r=await this.__getOne(a(this.name));r=r||[],r.includes(t)||r.push(t),await this.__set(a(this.name),r),await this.__set(n(this.name,t),e)}),!1,a(this.name),t)}async __set(t,e){let r={};return r[t]=e,browser.storage[this.type].set(r)}async setAll(t,e=!1){for(let r in t)t.hasOwnProperty(r)&&(!e&&await this.hasOne(r)||await this.set(r,t[r]))}async __setAll(t,e=!1){for(let r in t)t.hasOwnProperty(r)&&(!e&&await this.hasOne(r)||await this.__set(n(this.name,r),t[r]))}async getOne(t){return this.__getOne(n(this.name,t))}async __getOne(t){return(await browser.storage[this.type].get(t))[t]}async getKeys(){return this.__getOne(a(this.name))}async get(...t){let e={};for(let r of t)e[r]=await this.getOne(r);return e}__manual_fulfill(t,e,r){return Promise.resolve(r(e,t))}async __fulfill(t,e){return this.__manual_fulfill(t,await this.getOne(t),e)}async fulfillOnce(t,e,r=void 0){return void 0!==r&&(await this.hasOne(t)||await this.set(t,r)),this.__fulfill(t,e)}addFulfiller(t,e){this.__fulfillers.hasOwnProperty(t)||(this.__fulfillers[t]=[]),this.__fulfillers[t].push(e)}removeFulfiller(t,e){if(this.__fulfillers.hasOwnProperty(t)){let r=this.__fulfillers[t].indexOf(e);-1!==r&&this.__fulfillers[t].splice(r,1)}}async fulfill(t,e,r=void 0){return void 0!==r&&(await this.hasOne(t)||await this.set(t,r)),this.addFulfiller(t,e),this.fulfillOnce(t,e,void 0)}async __onChange(t){console.log(Object.keys(t));for(let e in t)if(t.hasOwnProperty(e)&&o(this.name,e)){let r=i(this.name,e);this.__fulfillers.hasOwnProperty(r)&&this.__fulfillers[r].forEach((n=>this.__manual_fulfill(r,t[e].newValue,n))),this.__fulfillers.hasOwnProperty("*")&&this.__fulfillers["*"].forEach((n=>this.__manual_fulfill(r,t[e].newValue,n)))}}}const c=new l("local"),u=new l("sync"),f=new l("local","temp",!0),h=new l("sync","temp",!0);browser.storage.onChanged.addListener((async(t,e)=>{switch(e){case"local":await c.__onChange(t),await f.__onChange(t);break;case"sync":await u.__onChange(t),await h.__onChange(t)}}))},195:(t,e,r)=>{"use strict";r.d(e,{T:()=>o});var n=r(509);class o{constructor(...t){this.ids=t}activate(){return browser.tabs.update(this.ids[0],{active:!0})}pin(t){return Promise.all(this.ids.map((e=>browser.tabs.update(e,{pinned:t}))))}mute(t){return Promise.all(this.ids.map((e=>browser.tabs.update(e,{muted:t}))))}openerTabId(t){return Promise.all(this.ids.map((e=>browser.tabs.update(e,{openerTabId:t}))))}reload(t=!1){return Promise.all(this.ids.map((e=>browser.tabs.reload(e,{bypassCache:t}))))}discard(){return"firefox"===n.S?browser.tabs.discard(this.ids):browser.tabs.discard?Promise.all(this.ids.map((t=>browser.tabs.discard(t)))):void 0}remove(){return browser.tabs.remove(this.ids)}captureTab(t,e){return browser.tabs.captureTab?new Promise(((r,n)=>{browser.tabs.captureTab(this.ids[0],e).then((e=>{t.aborted||r(e)})),t.onabort=n})):Promise.resolve(void 0)}moveTo(t,e){return o.move(this.ids,t,e)}static move(t,e,r){return browser.tabs.move(t,{windowId:e,index:r})}}},422:(t,e,r)=>{"use strict";r.a(t,(async(t,n)=>{try{r.d(e,{G_:()=>i.G_,J5:()=>i.J5,P:()=>i.P,Pe:()=>i.Pe,Zl:()=>i.Zl,mg:()=>i.mg,qX:()=>i.qX,wg:()=>i.wg,xj:()=>i.xj});var o=r(275),i=r(602),a=t([o]);o=(a.then?(await a)():a)[0],(0,i.lI)(o),n()}catch(t){n(t)}}))},602:(t,e,r)=>{"use strict";let n;function o(t){n=t}r.d(e,{Ct:()=>N,Dy:()=>j,G_:()=>m,J5:()=>b,P:()=>T,Pe:()=>x,U_:()=>A,V5:()=>k,Xu:()=>I,Zl:()=>O,bk:()=>$,lI:()=>o,mg:()=>S,qX:()=>v,u$:()=>L,wg:()=>P,xj:()=>y});let i=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});i.decode();let a=null;function s(){return null!==a&&0!==a.byteLength||(a=new Uint8Array(n.memory.buffer)),a}function l(t,e){return t>>>=0,i.decode(s().subarray(t,t+e))}const c=new Array(128).fill(void 0);c.push(void 0,null,!0,!1);let u=c.length;function f(t){u===c.length&&c.push(c.length+1);const e=u;return u=c[e],c[e]=t,e}function h(t){return c[t]}function d(t){const e=h(t);return function(t){t<132||(c[t]=u,u=t)}(t),e}let _=0,p=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const g="function"==typeof p.encodeInto?function(t,e){return p.encodeInto(t,e)}:function(t,e){const r=p.encode(t);return e.set(r),{read:t.length,written:r.length}};function w(t,e,r){if(void 0===r){const r=p.encode(t),n=e(r.length,1)>>>0;return s().subarray(n,n+r.length).set(r),_=r.length,n}let n=t.length,o=e(n,1)>>>0;const i=s();let a=0;for(;a<n;a++){const e=t.charCodeAt(a);if(e>127)break;i[o+a]=e}if(a!==n){0!==a&&(t=t.slice(a)),o=r(o,n,n=a+3*t.length,1)>>>0;const e=s().subarray(o+a,o+n);a+=g(t,e).written,o=r(o,n,a,1)>>>0}return _=a,o}function y(t){const e=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=_;return d(n.parse_query(e,r))}function b(){return d(n.shard_uninitialized())}function m(){n.init_shard()}function v(t){const e=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=_;return d(n.shard_doc(e,r))}function O(t){const e=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=_;return d(n.unshard_doc(e,r))}function S(t){const e=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),r=_;return d(n.update_stats(e,r))}function T(t,e){const r=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=_;return d(n.query(r,o,e))}function x(t,e,r,o,i){const a=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),s=_,l=w(e,n.__wbindgen_malloc,n.__wbindgen_realloc),c=_,u=w(r,n.__wbindgen_malloc,n.__wbindgen_realloc),f=_,h=w(o,n.__wbindgen_malloc,n.__wbindgen_realloc),p=_,g=w(i,n.__wbindgen_malloc,n.__wbindgen_realloc),y=_;return d(n.index(a,s,l,c,u,f,h,p,g,y))}function P(t,e){const r=w(t,n.__wbindgen_malloc,n.__wbindgen_realloc),o=_,i=w(e,n.__wbindgen_malloc,n.__wbindgen_realloc),a=_;return d(n.unindex(r,o,i,a))}let E=null;function C(){return(null===E||!0===E.buffer.detached||void 0===E.buffer.detached&&E.buffer!==n.memory.buffer)&&(E=new DataView(n.memory.buffer)),E}function A(t,e){console.log(l(t,e))}function j(t,e){alert(l(t,e))}function N(t,e){return f(JSON.parse(l(t,e)))}function k(){return f(new Error)}function L(t,e){const r=w(h(e).stack,n.__wbindgen_malloc,n.__wbindgen_realloc),o=_;C().setInt32(t+4,o,!0),C().setInt32(t+0,r,!0)}function I(t,e){let r,o;try{r=t,o=e,console.error(l(t,e))}finally{n.__wbindgen_free(r,o,1)}}function $(t){d(t)}},275:(t,e,r)=>{"use strict";var n=r(602);t.exports=r.v(e,t.id,"be833edb201ea36b5677",{"./cartographer_bg.js":{__wbg_log_aeb46563be443aae:n.U_,__wbg_alert_e385cf285a5a8938:n.Dy,__wbindgen_json_parse:n.Ct,__wbg_new_abda76e883ba8a5f:n.V5,__wbg_stack_658279fe44541cf6:n.u$,__wbg_error_f851667af71bcfc6:n.Xu,__wbindgen_object_drop_ref:n.bk}})}},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return o[t](r,r.exports,a),r.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},a.a=(o,i,a)=>{var s;a&&((s=[]).d=-1);var l,c,u,f=new Set,h=o.exports,d=new Promise(((t,e)=>{u=e,c=t}));d[e]=h,d[t]=t=>(s&&t(s),f.forEach(t),d.catch((t=>{}))),o.exports=d,i((o=>{var i;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var i=[];i.d=0,o.then((t=>{a[e]=t,n(i)}),(t=>{a[r]=t,n(i)}));var a={};return a[t]=t=>t(i),a}}var s={};return s[t]=t=>{},s[e]=o,s})))(o);var a=()=>l.map((t=>{if(t[r])throw t[r];return t[e]})),c=new Promise((e=>{(i=()=>e(a)).r=0;var r=t=>t!==s&&!f.has(t)&&(f.add(t),t&&!t.d&&(i.r++,t.push(i)));l.map((e=>e[t](r)))}));return i.r?c:a()}),(t=>(t?u(d[r]=t):c(h),n(s)))),s&&s.d<0&&(s.d=0)},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.v=(t,e,r,n)=>{var o=fetch(a.p+""+r+".module.wasm"),i=()=>o.then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,n))).then((e=>Object.assign(t,e.instance.exports)));return o.then((e=>"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(e,n).then((e=>Object.assign(t,e.instance.exports)),(t=>{if("application/wasm"!==e.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t),i();throw t})):i()))},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t+"../"})(),a(12)})();