(()=>{var t={532:(t,e,o)=>{"use strict";var r;(r="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?o.g:self).Proxy||(r.Proxy=o(780)(),r.Proxy.revocable=r.Proxy.revocable)},780:t=>{t.exports=function(){let t,e=null;function o(t){return!!t&&("object"==typeof t||"function"==typeof t)}function r(t){if(null!==t&&!o(t))throw new TypeError("Object prototype may only be an Object or null: "+t)}const n=Object,i=Boolean(n.create)||!({__proto__:null}instanceof n),l=n.create||(i?function(t){return r(t),{__proto__:t}}:function(t){if(r(t),null===t)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var e=function(){};return e.prototype=t,new e}),s=function(){return null},a=n.getPrototypeOf||([].__proto__===Array.prototype?function(t){const e=t.__proto__;return o(e)?e:null}:s);return t=function(c,f){if(void 0===(this&&this instanceof t?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!o(c)||!o(f))throw new TypeError("Cannot create proxy with a non-object as target or handler");let u=function(){};e=function(){c=null,u=function(t){throw new TypeError(`Cannot perform '${t}' on a proxy that has been revoked`)}},setTimeout((function(){e=null}),0);const h=f;f={get:null,set:null,apply:null,construct:null};for(let t in h){if(!(t in f))throw new TypeError(`Proxy polyfill does not support trap '${t}'`);f[t]=h[t]}"function"==typeof h&&(f.apply=h.apply.bind(h));const p=a(c);let y,d=!1,_=!1;"function"==typeof c?(y=function(){const t=this&&this.constructor===y,e=Array.prototype.slice.call(arguments);return u(t?"construct":"apply"),t&&f.construct?f.construct.call(this,c,e):!t&&f.apply?f.apply(c,this,e):t?(e.unshift(c),new(c.bind.apply(c,e))):c.apply(this,e)},d=!0):c instanceof Array?(y=[],_=!0):y=i||null!==p?l(p):{};const m=f.get?function(t){return u("get"),f.get(this,t,y)}:function(t){return u("get"),this[t]},g=f.set?function(t,e){u("set"),f.set(this,t,e,y)}:function(t,e){u("set"),this[t]=e},w=n.getOwnPropertyNames(c),b={};w.forEach((function(t){if((d||_)&&t in y)return;const e=n.getOwnPropertyDescriptor(c,t),o={enumerable:Boolean(e.enumerable),get:m.bind(c,t),set:g.bind(c,t)};n.defineProperty(y,t,o),b[t]=!0}));let v=!0;if(d||_){const t=n.setPrototypeOf||([].__proto__===Array.prototype?function(t,e){return r(e),t.__proto__=e,t}:s);p&&t(y,p)||(v=!1)}if(f.get||!v)for(let t in c)b[t]||n.defineProperty(y,t,{get:m.bind(c,t)});return n.seal(c),n.seal(y),y},t.revocable=function(o,r){return{proxy:new t(o,r),revoke:e}},t}},196:t=>{!function(){"use strict";t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var o,r=t.HTMLElement||t.Element,n=468,i={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||a,scrollIntoView:r.prototype.scrollIntoView},l=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,s=(o=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(o)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?y.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):i.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?i.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):y.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var t=arguments[0].left,e=arguments[0].top;y.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var o=function(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}(this),r=o.getBoundingClientRect(),n=this.getBoundingClientRect();o!==e.body?(y.call(this,o,o.scrollLeft+n.left-r.left,o.scrollTop+n.top-r.top),"fixed"!==t.getComputedStyle(o).position&&t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):t.scrollBy({left:n.left,top:n.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function a(t,e){this.scrollLeft=t,this.scrollTop=e}function c(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function f(t,e){return"Y"===e?t.clientHeight+s<t.scrollHeight:"X"===e?t.clientWidth+s<t.scrollWidth:void 0}function u(e,o){var r=t.getComputedStyle(e,null)["overflow"+o];return"auto"===r||"scroll"===r}function h(t){var e=f(t,"Y")&&u(t,"Y"),o=f(t,"X")&&u(t,"X");return e||o}function p(e){var o,r,i,s,a=(l()-e.startTime)/n;s=a=a>1?1:a,o=.5*(1-Math.cos(Math.PI*s)),r=e.startX+(e.x-e.startX)*o,i=e.startY+(e.y-e.startY)*o,e.method.call(e.scrollable,r,i),r===e.x&&i===e.y||t.requestAnimationFrame(p.bind(t,e))}function y(o,r,n){var s,c,f,u,h=l();o===e.body?(s=t,c=t.scrollX||t.pageXOffset,f=t.scrollY||t.pageYOffset,u=i.scroll):(s=o,c=o.scrollLeft,f=o.scrollTop,u=a),p({scrollable:s,method:u,startTime:h,startX:c,startY:f,x:r,y:n})}}}}()}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=o(196),e=o.n(t);o(532);try{e().polyfill()}catch(t){console.log(t)}let r;function n(t,e){var o=document.createRange(),r=window.getSelection();o.setStart(t,e),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}function i(t,e){return"*"===e&&console.error("store: option id '*' is reserved! will lead to unexpected behavior"),"__"+t+"_$"+e}function l(t,e){return e.startsWith("__"+t+"_$")}function s(t,e){return e.substring(4+t.length,e.length)}r=window,Array.from||(Array.from=function(){let t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},o=Math.pow(2,53)-1;return function(t){let r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");let n,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!e(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}let l,s=function(t){let e=function(t){let e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),o)}(r.length),a=e(this)?Object(new this(s)):new Array(s),c=0;for(;c<s;)l=r[c],a[c]=i?void 0===n?i(l,c):i.call(n,l,c):l,c+=1;return a.length=s,a}}()),r.t_delay=t=>new Promise((e=>setTimeout(e,t))),r.t_in=(t,e)=>t.hasOwnProperty(e),r.t_arrayBufferToBase64=function(t){let e="";return[].slice.call(new Uint8Array(t)).forEach((t=>e+=String.fromCharCode(t))),r.btoa(e)},r.t_getImage=function(t,e=!1){return new Promise(((o,r)=>{try{if(t.startsWith("chrome://"))o();else{let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){let t=n.getResponseHeader("Content-Type").trim();if(t.startsWith("image/")){let e="data:"+t+";charset=utf-8;base64,",r=t_arrayBufferToBase64(n.response);o(e+r)}else r('Image Request Failed: Content-Type is not an image! (Content-Type: "'+t+'")')}else r(this.status)},n.responseType="arraybuffer",n.open("GET",t,!0),e&&n.setRequestHeader("Cache-Control","no-store"),n.send()}}catch(t){r(t.message)}}))},r.t_ctrlCmdKey=function(){return navigator.platform.indexOf("Mac")>=0||"iPhone"===navigator.platform?"Meta":"Control"},r.t_getElementsBetween=function(t,e,o=t=>!0){if(!t.parentElement.isSameNode(e.parentElement))return;if(t.isSameNode(e))return[];let r=[],n=t=>t.nextElementSibling;t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING&&(n=t=>t.previousElementSibling);let i=n(t);for(;i&&!i.isSameNode(e);)o(i)&&r.push(i),i=n(i);return r},r.t_getInView=function(t,e,o){let r=e.getBoundingClientRect(),n=t.getBoundingClientRect();(r.y>n.y||r.y>n.y+n.height||n.y>=r.y+r.height||n.y+n.height>=r.y+r.height)&&t.scrollIntoView(o)},r.t_getCaretPosition=function(t){var e,o=0,r=t.ownerDocument||t.document,n=r.defaultView||r.parentWindow;if(void 0!==n.getSelection){if((e=n.getSelection()).rangeCount>0){var i=n.getSelection().getRangeAt(0),l=i.cloneRange();l.selectNodeContents(t),l.setEnd(i.endContainer,i.endOffset),o=l.toString().length}}else if((e=r.selection)&&"Control"!=e.type){var s=e.createRange(),a=r.body.createTextRange();a.moveToElementText(t),a.setEndPoint("EndToEnd",s),o=a.text.length}return o},r.t_setCaretPosition=function(t,e){let o=0,r=e;for(let i of t.childNodes)if(i.nodeType===Node.TEXT_NODE){if(o+=i.nodeValue.length,e<=o)return void n(i,r);r-=i.nodeValue.length}else if(i.nodeType===Node.ELEMENT_NODE){let t=i.innerText;if(o+=t.length,e<=o)return void t_setCaretPosition(i,r);r-=t.length}},r.t_stripHtml=function(t){return(new DOMParser).parseFromString(t,"text/html").body.textContent||""},r.t_byteLen=t=>new Blob([t]).size,r.t_chunkSubstr=function(t,e){const o=Math.ceil(t.length/e),r=new Array(o);for(let n=0,i=0;n<o;++n,i+=e)r[n]=t.substr(i,e);return r},r.t_chunkBytes=function(t,e){let o=Math.ceil(t_byteLen(t)/e),r=new Array(o),n=0;r[n]="";for(const o of t){let t=r[n]+o;t_byteLen(t)>e?(n++,n>=r.length&&r.push(""),r[n]=o):r[n]=t}return r},r.t_browserDetection=function(){return browser.runtime.getURL("/").startsWith("moz")?"moz":"chromium"},r.t_getKeyboardFocusableElements=(t=document)=>[...t.querySelectorAll('a[href], button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')].filter((t=>!t.hasAttribute("disabled")&&!t.getAttribute("aria-hidden"))),r.t_resetAnimation=function(t){t.style.animation="none",t.offsetHeight,t.style.animation=null},r.t_tryParseJSONObject=function(t){try{var e=JSON.parse(t);if(e&&"object"==typeof e)return e}catch(t){}return!1},r.t_sanitizeXMLTags=function(t){return t.replace(/<\/?([a-zA-Z0-9]+)>/g,(t=>t.replace("<","&lt;").replace(">","&gt;")))},r.t_errorToString=t=>`${t.toString()}\n${t.stack||"No stack trace available."}`;const a=t=>i(t,"___DELONSTART");class c extends Error{}class f{constructor(t,e="conf",o=!1){this.type=t,this.name=e,this.tmp=o,this.__fulfillers={},this.__modifierPromises={}}async modify(t,e,o=!0){let r=this.__modifierPromises[t];return this.__modifierPromises[t]=new Promise((async(n,l)=>{try{r&&await r;let l=o?await this.getOne(t):void 0,s=e(l);s instanceof Promise&&(s=await s),void 0!==s&&await this.__set(i(this.name,t),s),n()}catch(e){console.error(`storage modification for property "${t}" failed with the following error:`),console.error(e),n()}})),this.__modifierPromises[t]}async modifyAll(t,e,...o){let r=o.map((t=>this.__modifierPromises[t])),n=new Promise((async(n,i)=>{try{for(let t of r)void 0!==t&&await t;let i=e?await this.get(...o):void 0,l=t(i);l instanceof Promise&&(l=await l),void 0!==l&&await this.__setAll(l),n()}catch(t){console.error(`storage modification for properties "${o}" failed with the following error:`),console.error(t),n()}}));for(let t of o)this.__modifierPromises[t]=n;return n}special(t){return i(this.name,t)}isSpecial(t){return l(this.name,t)}normal(t){return s(this.name,t)}__delOnStart(){return this.modify(a(this.name),(async()=>{let t=await this.__getOne(a(this.name));if(t)return console.log("[store] delOnStart exists: "),console.log(t),this.modifyAll((()=>(console.log("[store] deleting"),this.__unset(...t))),!1,...t).then((()=>this.__set(a(this.name),[])));this.__set(a(this.name),[])}),!1)}__chunkNumber(t,e,o="_part"){return parseInt(e.substring(t.length+o.length))}async storeLarge(t,e,o=8092){const r=t_chunkBytes(e,o),n=await this.getKeys();let i=[];for(let e of n)e.startsWith(t)&&this.__chunkNumber(t,e)>=r.length&&i.push(e);let l={};for(let[e,o]of r.entries())l[t+"_part"+e]=o;await this.unset(...i);try{await this.setAll(l,!0)}catch(t){throw await this.unset(...Object.keys(l)),new c("storeLarge failed! error: "+t)}}async retrieveLarge(t){const e=await this.getKeys();let o=[],r=0;for(let n of e)if(n.startsWith(t)){o.push(n);let e=this.__chunkNumber(t,n);e>r&&(r=e)}let n=await this.get(...o),i="";for(let e=0;e<=r;e++)i+=n[t+"_part"+e];return i}async hasOne(t){return t=i(this.name,t),(await browser.storage[this.type].get(t)).hasOwnProperty(t)}async has(...t){let e={};for(let o of t)e[o]=await this.hasOne(o);return e}unset(...t){return this.modifyAll((async()=>{let e=await this.__getOne(a(this.name));for(let o of t){let t=e.indexOf(o);-1!==t&&e.splice(t,1)}await this.__set(a(this.name),e),await this.__unset(...t)}),!1,a(this.name),...t)}async __unset(...t){return browser.storage[this.type].remove(t.map((t=>i(this.name,t))))}set(t,e){return this.modifyAll((async()=>{let o=await this.__getOne(a(this.name));o=o||[],o.includes(t)||o.push(t),await this.__set(a(this.name),o),await this.__set(i(this.name,t),e)}),!1,a(this.name),t)}async __set(t,e){let o={};return o[t]=e,browser.storage[this.type].set(o)}async setAll(t,e=!1){for(let o in t)t.hasOwnProperty(o)&&(!e&&await this.hasOne(o)||await this.set(o,t[o]))}async __setAll(t,e=!1){for(let o in t)t.hasOwnProperty(o)&&(!e&&await this.hasOne(o)||await this.__set(i(this.name,o),t[o]))}async getOne(t){return this.__getOne(i(this.name,t))}async __getOne(t){return(await browser.storage[this.type].get(t))[t]}async getKeys(){return this.__getOne(a(this.name))}async get(...t){let e={};for(let o of t)e[o]=await this.getOne(o);return e}__manual_fulfill(t,e,o){return Promise.resolve(o(e,t))}async __fulfill(t,e){return this.__manual_fulfill(t,await this.getOne(t),e)}async fulfillOnce(t,e,o=void 0){return void 0!==o&&(await this.hasOne(t)||await this.set(t,o)),this.__fulfill(t,e)}addFulfiller(t,e){this.__fulfillers.hasOwnProperty(t)||(this.__fulfillers[t]=[]),this.__fulfillers[t].push(e)}removeFulfiller(t,e){if(this.__fulfillers.hasOwnProperty(t)){let o=this.__fulfillers[t].indexOf(e);-1!==o&&this.__fulfillers[t].splice(o,1)}}async fulfill(t,e,o=void 0){return void 0!==o&&(await this.hasOne(t)||await this.set(t,o)),this.addFulfiller(t,e),this.fulfillOnce(t,e,void 0)}async __onChange(t){console.log(Object.keys(t));for(let e in t)if(t.hasOwnProperty(e)&&l(this.name,e)){let o=s(this.name,e);this.__fulfillers.hasOwnProperty(o)&&this.__fulfillers[o].forEach((r=>this.__manual_fulfill(o,t[e].newValue,r))),this.__fulfillers.hasOwnProperty("*")&&this.__fulfillers["*"].forEach((r=>this.__manual_fulfill(o,t[e].newValue,r)))}}}const u=new f("local"),h=new f("sync"),p=new f("local","temp",!0),y=new f("sync","temp",!0);browser.storage.onChanged.addListener((async(t,e)=>{switch(e){case"local":await u.__onChange(t),await p.__onChange(t);break;case"sync":await h.__onChange(t),await y.__onChange(t)}}));let d=async()=>{console.log("[store] clearing temporary data");const t=new f("local","temp",!0),e=new f("sync","temp",!0);await t.__delOnStart(),await e.__delOnStart(),console.log("[store] done!")};browser.runtime.onStartup.addListener(d),browser.runtime.onInstalled.addListener(d)})()})();