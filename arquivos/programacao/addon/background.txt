
vi
https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background

ver
https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Background_scripts
https://developer.chrome.com/blog/background-fetch?hl=pt-br

Manifest version: 2 or higher

"background": {
  "scripts": ["background.js"]
}

Background scripts are loaded as soon as the extension is loaded and stay loaded until the extension is disabled or uninstalled unless persistent is specified as false.

"type"
A string value.
Determines whether the scripts specified in scripts are loaded as ES modules.
 - classic indicates the background scripts or service workers are not included as an ES Module. (default)
 - module indicates the background scripts or service workers are included as an ES Module. This enables the background page or service worker to import code.

Chrome only supports background.service_worker
firefox not supports background.service_worker

ver exemplos/cross-browser


ServiceWorkerGlobal.fetch
É acionado quando algo é recuperado do pacote de extensão ou quando fetch() e XMLHttpRequest() são chamados de uma extensão ou um script pop-up. As chamadas de scripts de conteúdo não são interceptadas pelo gerenciador fetch do worker de serviço. Nesses casos, você precisa adicionar os URLs das páginas que quer buscar à chave "host_permissions" no manifest.json.
