(()=>{var e,t,n={4143:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new a(r,s||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,s=r.length,i=new Array(s);a<s;a++)i[a]=r[a].fn;return i},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,s,i){var o=n?n+e:e;if(!this._events[o])return!1;var c,u,l=this._events[o],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,a),!0;case 5:return l.fn.call(l.context,t,r,a,s),!0;case 6:return l.fn.call(l.context,t,r,a,s,i),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,a);break;default:if(!c)for(d=1,c=new Array(f-1);d<f;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,a){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||i(this,s);else{for(var c=0,u=[],l=o.length;c<l;c++)(o[c].fn!==t||a&&!o[c].once||r&&o[c].context!==r)&&u.push(o[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var r=n(8618);const a="Add theme support",s="20230301044301_add_theme_support";async function i(){const e={appTheme:"auto",showContribPage:!0,contribPageLastAutoOpen:0,confirmDataRemoval:!0,showDataTypeIcons:!0,pinActionToolbarOptions:!1,pinActionToolbarContribute:!0},{installTime:t}=await browser.storage.local.get("installTime");return e.installTime=(0,r.I4)(t),e.storageVersion=s,browser.storage.local.set(e)}},3159:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add appVersion",a="20240514170322_add_appversion";async function s(){const e={appVersion:""};return e.storageVersion=a,browser.storage.local.set(e)}},1760:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add installTime, useCount and contribPageLastOpen",a="BkFsUtt7f";async function s(){const e={};return e.installTime=(new Date).getTime(),e.useCount=0,e.contribPageLastOpen=0,e.storageVersion=a,browser.storage.local.set(e)}},6271:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var r=n(4729);const a="Enable localStorage and indexedDB for Firefox",s="ByCtvupNz";async function i(){const e={};if("firefox"===r.Dm){const{dataTypes:t}=await browser.storage.local.get("dataTypes");e.dataTypes=t.concat("localStorage","indexedDB")}return e.storageVersion=s,browser.storage.local.set(e)}},9701:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var r=n(4729);const a="Add cacheStorage and remove serverBoundCertificates in Chrome",s="aPSasaNb4";async function i(){const e={};if("firefox"!==r.Dm){const{dataTypes:t,disabledDataTypes:n}=await browser.storage.local.get(["dataTypes","disabledDataTypes"]);t.splice(t.indexOf("cache")+1,0,"cacheStorage"),e.dataTypes=t.filter((function(e){return"serverBoundCertificates"!==e})),e.disabledDataTypes=n.filter((function(e){return"serverBoundCertificates"!==e}))}return e.storageVersion=s,browser.storage.local.set(e)}},9270:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Add closeTabs, closePinnedTabs and reloadTabs options",a="kuZ4zBZDX";async function s(){const e={closeTabs:"false",closePinnedTabs:!0,reloadTabs:"false"};return e.storageVersion=a,browser.storage.local.set(e)}},133:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var r=n(4729);const a="Initial version",s="xO0Hh1Vm2";async function i(){let e=["cookies","history","cache","formData","downloads","serviceWorkers","localStorage","indexedDB","fileSystems","pluginData","webSQL","passwords","appcache","serverBoundCertificates"],t=["appcache","fileSystems","passwords","pluginData","serverBoundCertificates","webSQL"];if("firefox"===r.Dm){const n=["appcache","fileSystems","indexedDB","localStorage","serverBoundCertificates","webSQL"];e=e.filter((e=>-1===n.indexOf(e))),t=t.filter((e=>-1===n.indexOf(e)))}const n={dataTypes:e,disabledDataTypes:t,clearAllDataTypesAction:"sub",clearSince:"epoch",notifyOnSuccess:!0};return n.storageVersion=s,browser.storage.local.set(n)}},211:(e,t,n)=>{"use strict";n.r(t),n.d(t,{message:()=>r,revision:()=>a,upgrade:()=>s});const r="Initial version",a="20240514122825_initial_version";async function s(){const e={platformInfo:null};return e.storageVersion=a,browser.storage.session.set(e)}},786:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,Hu:()=>a,XL:()=>i});var r=n(4729);async function a({area:e="local"}={}){try{return await browser.storage[e].get(""),!0}catch(e){return!1}}const s={local:!1,session:!1,sync:!1};async function i({area:e="local"}={}){if(s[e])return!0;{const{storageVersion:t}=await browser.storage[e].get("storageVersion");if(t&&t===r.QB[e])return s[e]=!0,!0}return!1}async function o({area:e="local"}={}){if(!s[e])return new Promise(((t,n)=>{let r;const a=async function(){await i({area:e})?(self.clearTimeout(s),t()):r?n(new Error(`Storage (${e}) is not ready`)):self.setTimeout(a,30)},s=self.setTimeout((function(){r=!0}),6e4);a()}))}const c={get:async function(e=null,{area:t="local"}={}){return await o({area:t}),browser.storage[t].get(e)},set:async function(e,{area:t="local"}={}){return await o({area:t}),browser.storage[t].set(e)},remove:async function(e,{area:t="local"}={}){return await o({area:t}),browser.storage[t].remove(e)},clear:async function({area:e="local"}={}){return await o({area:e}),browser.storage[e].clear()}}},8618:(e,t,n)=>{"use strict";n.d(t,{I4:()=>d,Jh:()=>p,aI:()=>i,e6:()=>o,kL:()=>c,m0:()=>f,q4:()=>s,uo:()=>l});var r=n(786),a=n(4729);function s(e,t){return browser.i18n.getMessage(e,t)}async function i({url:e="",index:t=null,active:n=!0,openerTabId:r=null,getTab:s=!1}={}){const i={url:e,active:n};null!==t&&(i.index=t),null!==r&&(i.openerTabId=r);let o=await browser.tabs.create(i);if(s){if("samsung"===a.Dm){let t=1;for(;t<=500&&(!o||o.url!==e);)[o]=await browser.tabs.query({lastFocusedWindow:!0,url:e}),await h(20),t+=1}return o}}async function o(){const[e]=await browser.tabs.query({lastFocusedWindow:!0,active:!0});return e}async function c({tab:e,tabId:t=null}={}){if(e||null===t||(e=await browser.tabs.get(t).catch((e=>null))),e&&e.id!==browser.tabs.TAB_ID_NONE)return!0}let u;async function l(){if(!function(){const e=a.tn?browser.runtime.getURL("/src/background/script.js"):browser.runtime.getURL("/src/background/index.html");return self.location.href===e}())return browser.runtime.sendMessage({id:"getPlatform"});let{os:e,arch:t}=await async function(){if(u)return u;if(a.tn)({platformInfo:u}=await r.Ay.get("platformInfo",{area:"session"}));else try{u=JSON.parse(window.sessionStorage.getItem("platformInfo"))}catch(e){}if(!u){let e,t;if("samsung"===a.Dm?(e="android",t=""):"safari"===a.Dm?({os:e,arch:t}=await browser.runtime.sendNativeMessage("application.id",{id:"getPlatformInfo"})):({os:e,arch:t}=await browser.runtime.getPlatformInfo()),u={os:e,arch:t},a.tn)await r.Ay.set({platformInfo:u},{area:"session"});else try{window.sessionStorage.setItem("platformInfo",JSON.stringify(u))}catch(e){}}return u}();"win"===e?e="windows":"mac"===e&&(e="macos"),["x86-32","i386"].includes(t)?t="386":["x86-64","x86_64"].includes(t)?t="amd64":t.startsWith("arm")&&(t="arm");const n="windows"===e,s="macos"===e,i="linux"===e,o="android"===e,c="ios"===e,l="ipados"===e,f=["android","ios","ipados"].includes(e),d="chrome"===a.Dm,p=["chrome","edge"].includes(a.Dm)&&/\sedg(?:e|a|ios)?\//i.test(navigator.userAgent),h="firefox"===a.Dm,v=["chrome","opera"].includes(a.Dm)&&/\sopr\//i.test(navigator.userAgent),y="safari"===a.Dm,b="samsung"===a.Dm;return{os:e,arch:t,targetEnv:a.Dm,isWindows:n,isMacos:s,isLinux:i,isAndroid:o,isIos:c,isIpados:l,isMobile:f,isChrome:d,isEdge:p,isFirefox:h,isOpera:v,isSafari:y,isSamsung:b}}async function f(){const{os:e}=await l();return"android"===e}function d(e){return e||(e=Date.now()),e-e%864e5}function p(e,t){if(e=`${e}Run`,!self[e])return self[e]=!0,!t||t()}function h(e){return new Promise((t=>self.setTimeout(t,e)))}},4729:(e,t,n)=>{"use strict";n.d(t,{CU:()=>i,Dm:()=>r,QB:()=>s,ZY:()=>a,tn:()=>o});const r="firefox",a=!0,s={local:"20240514170322_add_appversion",session:"20240514122825_initial_version"},i="5.0.0",o=!1},7249:(e,t,n)=>{var r={"./local/20230301044301_add_theme_support.js":667,"./local/20240514170322_add_appversion.js":3159,"./local/BkFsUtt7f.js":1760,"./local/ByCtvupNz.js":6271,"./local/aPSasaNb4.js":9701,"./local/kuZ4zBZDX.js":9270,"./local/xO0Hh1Vm2.js":133,"./session/20240514122825_initial_version.js":211};function a(e){return s(e).then(n)}function s(e){return Promise.resolve().then((()=>{if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}a.keys=()=>Object.keys(r),a.resolve=s,a.id=7249,e.exports=a},8977:e=>{"use strict";e.exports=JSON.parse('{"revisions":{"local":["xO0Hh1Vm2","BkFsUtt7f","ByCtvupNz","kuZ4zBZDX","aPSasaNb4","20230301044301_add_theme_support","20240514170322_add_appversion"],"session":["20240514122825_initial_version"]}}')}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return n[e](s,s.exports,a),s.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);a.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(s,i),s},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=a(4143);class t extends Error{constructor(e){super(e),this.name="TimeoutError"}}class n extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const r=e=>void 0===globalThis.DOMException?new n(e):new DOMException(e),s=e=>{const t=void 0===e.reason?r("This operation was aborted."):e.reason;return t instanceof Error?t:r(t)};class i{#e=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority)return void this.#e.push(n);const r=function(e,t,n){let r=0,a=e.length;for(;a>0;){const n=Math.trunc(a/2);let i=r+n;s=e[i],t.priority-s.priority<=0?(r=++i,a-=n+1):a=n}var s;return r}(this.#e,n);this.#e.splice(r,0,n)}dequeue(){const e=this.#e.shift();return e?.run}filter(e){return this.#e.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#e.length}}const o=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},c=function(e,t){return e===t||e!=e&&t!=t},u="object"==typeof global&&global&&global.Object===Object&&global;var l="object"==typeof self&&self&&self.Object===Object&&self;const f=u||l||Function("return this")(),d=f.Symbol;var p=Object.prototype,h=p.hasOwnProperty,v=p.toString,y=d?d.toStringTag:void 0;var b=Object.prototype.toString;var g=d?d.toStringTag:void 0;const w=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":g&&g in Object(e)?function(e){var t=h.call(e,y),n=e[y];try{e[y]=void 0;var r=!0}catch(e){}var a=v.call(e);return r&&(t?e[y]=n:delete e[y]),a}(e):function(e){return b.call(e)}(e)},m=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},_=function(e){if(!m(e))return!1;var t=w(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},T=function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!_(e)};var I=/^(?:0|[1-9]\d*)$/;const O=function(e,t,n){if(!m(n))return!1;var r=typeof t;return!!("number"==r?T(n)&&function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&I.test(e))&&e>-1&&e%1==0&&e<t}(t,n.length):"string"==r&&t in n)&&c(n[t],e)};var C=/\s/;var x=/^\s+/;const A=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&C.test(e.charAt(t)););return t}(e)+1).replace(x,""):e},P=function(e){return null!=e&&"object"==typeof e};var S=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,j=/^0o[0-7]+$/i,E=parseInt;const L=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||P(e)&&"[object Symbol]"==w(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=A(e);var n=D.test(e);return n||j.test(e)?E(e.slice(2),n?2:8):S.test(e)?NaN:+e};var q=1/0;const N=function(e){var t=function(e){return e?(e=L(e))===q||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0},k=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&O(e,t,n)?(t=0,n=r):(t=null==t?0:N(t),n=void 0===n?r:N(n)),function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}(e,t,n)):[]},z=function(e){return e!=e},$=function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}(e,z,n)};var V=Math.max;const B=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:N(n);return a<0&&(a=V(r+a,0)),$(e,t,a)};var F=a(786);async function M({area:e="local",data:t=null,silent:n=!1}={}){const r={getAvailableRevisions:async({area:e}={})=>(await Promise.resolve().then(a.t.bind(a,8977,19))).revisions[e],getCurrentRevision:async({area:e}={})=>(await browser.storage[e].get("storageVersion")).storageVersion,getRevision:async({area:e,revision:t}={})=>a(7249)(`./${e}/${t}.js`)};return"local"===e&&await async function(){if(await(0,F.Hu)({area:"sync"})){const{storageVersion:e}=await browser.storage.sync.get("storageVersion");if(e&&e.length<14){const{storageVersion:e}=await browser.storage.local.get("storageVersion");if(!e||e.length<14){const e=await browser.storage.sync.get(null);await browser.storage.local.clear(),await browser.storage.local.set(e),await browser.storage.sync.clear()}}}}(),async function(e,{area:t="local",data:n=null,silent:r=!1}={}){return async function(e,{area:t="local",data:n=null,silent:r=!1}={}){const a=await e.getAvailableRevisions({area:t}),s=await e.getCurrentRevision({area:t}),i=o(a);if(s===i)return;const c=k(a,B(a,s)+1,B(a,i)+1);r||console.log(`Migrating storage (${t}): ${s} => ${i}`);for(const a of c){const s=await e.getRevision({area:t,revision:a});r||console.log(`Applying revision (${t}): ${s.revision} - ${s.message}`),await s.upgrade(n)}}(e,{area:t,data:n,silent:r})}(r,{area:e,data:t,silent:n})}var U=a(8618);const R=f["__core-js_shared__"];var Q,Z=(Q=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"";var W=Function.prototype.toString;var J=/^\[object .+?Constructor\]$/,X=Function.prototype,Y=Object.prototype,H=X.toString,G=Y.hasOwnProperty,K=RegExp("^"+H.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ee=function(e){return!(!m(e)||(t=e,Z&&Z in t))&&(_(e)?K:J).test(function(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t},te=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ee(n)?n:void 0},ne=te(Object,"create");var re=Object.prototype.hasOwnProperty;var ae=Object.prototype.hasOwnProperty;function se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}se.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},se.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},se.prototype.get=function(e){var t=this.__data__;if(ne){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return re.call(t,e)?t[e]:void 0},se.prototype.has=function(e){var t=this.__data__;return ne?void 0!==t[e]:ae.call(t,e)},se.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&void 0===t?"__lodash_hash_undefined__":t,this};const ie=se,oe=function(e,t){for(var n=e.length;n--;)if(c(e[n][0],t))return n;return-1};var ce=Array.prototype.splice;function ue(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ue.prototype.clear=function(){this.__data__=[],this.size=0},ue.prototype.delete=function(e){var t=this.__data__,n=oe(t,e);return!(n<0||(n==t.length-1?t.pop():ce.call(t,n,1),--this.size,0))},ue.prototype.get=function(e){var t=this.__data__,n=oe(t,e);return n<0?void 0:t[n][1]},ue.prototype.has=function(e){return oe(this.__data__,e)>-1},ue.prototype.set=function(e,t){var n=this.__data__,r=oe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const le=ue,fe=te(f,"Map"),de=function(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map};function pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=function(){this.size=0,this.__data__={hash:new ie,map:new(fe||le),string:new ie}},pe.prototype.delete=function(e){var t=de(this,e).delete(e);return this.size-=t?1:0,t},pe.prototype.get=function(e){return de(this,e).get(e)},pe.prototype.has=function(e){return de(this,e).has(e)},pe.prototype.set=function(e,t){var n=de(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};const he=pe;function ve(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new he;++t<n;)this.add(e[t])}ve.prototype.add=ve.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ve.prototype.has=function(e){return this.__data__.has(e)};const ye=ve,be=function(e,t){return!(null==e||!e.length)&&$(e,t,0)>-1},ge=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1},we=function(e,t){return e.has(t)},me=function(e,t,n,r){var a,s=-1,i=be,o=!0,c=e.length,u=[],l=t.length;if(!c)return u;n&&(t=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}(t,(a=n,function(e){return a(e)}))),r?(i=ge,o=!1):t.length>=200&&(i=we,o=!1,t=new ye(t));e:for(;++s<c;){var f=e[s],d=null==n?f:n(f);if(f=r||0!==f?f:0,o&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;u.push(f)}else i(t,d,r)||u.push(f)}return u},_e=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},Te=function(e){return P(e)&&"[object Arguments]"==w(e)};var Ie=Object.prototype,Oe=Ie.hasOwnProperty,Ce=Ie.propertyIsEnumerable;const xe=Te(function(){return arguments}())?Te:function(e){return P(e)&&Oe.call(e,"callee")&&!Ce.call(e,"callee")},Ae=Array.isArray;var Pe=d?d.isConcatSpreadable:void 0;const Se=function(e){return Ae(e)||xe(e)||!!(Pe&&e&&e[Pe])},De=function e(t,n,r,a,s){var i=-1,o=t.length;for(r||(r=Se),s||(s=[]);++i<o;){var c=t[i];n>0&&r(c)?n>1?e(c,n-1,r,a,s):_e(s,c):a||(s[s.length]=c)}return s},je=function(e){return e};var Ee=Math.max;const Le=function(){try{var e=te(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),qe=Le?function(e,t){return Le(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:je;var Ne=Date.now;const ke=(ze=qe,$e=0,Ve=0,function(){var e=Ne(),t=16-(e-Ve);if(Ve=e,t>0){if(++$e>=800)return arguments[0]}else $e=0;return ze.apply(void 0,arguments)});var ze,$e,Ve;const Be=function(e){return P(e)&&T(e)},Fe=function(e,t){return ke(function(e,t,n){return t=Ee(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=Ee(r.length-t,0),i=Array(s);++a<s;)i[a]=r[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=r[a];return o[t]=n(i),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,o)}}(e,void 0,je),e+"")}((function(e,t){return Be(e)?me(e,De(t,1,Be,!0)):[]}));var Me=a(4729);const Ue=["dataTypes","disabledDataTypes","clearAllDataTypesAction","clearSince","closeTabs","closePinnedTabs","reloadTabs","notifyOnSuccess","showDataTypeIcons","confirmDataRemoval","appTheme","showContribPage","pinActionToolbarOptions","pinActionToolbarContribute"];async function Re(e){return void 0===e&&(e=await F.Ay.get(["dataTypes","disabledDataTypes"])),Fe(e.dataTypes,e.disabledDataTypes)}async function Qe({message:e,messageId:t,title:n,type:r="info",timeout:a=0}={}){if(n||(n=(0,U.q4)("extensionName")),t&&(e=(0,U.q4)(t)),"safari"===Me.Dm)return browser.runtime.sendNativeMessage("application.id",{id:"notification",message:e});{const t=await browser.notifications.create(`cb-notification-${r}`,{type:"basic",title:n,message:e,iconUrl:"/src/assets/icons/app/icon-64.png"});return a&&self.setTimeout((()=>{browser.notifications.clear(t)}),a),t}}async function Ze({url:e="",setOpenerTab:t=!0,getTab:n=!1,activeTab:r=null}={}){r||(r=await(0,U.e6)());const a={url:e,index:r.index+1,active:!0,getTab:n};return t&&(a.openerTabId=await async function({tab:e,tabId:t=null}={}){return e||null===t||(e=await browser.tabs.get(t).catch((e=>null))),await(0,U.kL)({tab:e})&&!(await(0,U.uo)()).isMobile?e.id:null}({tab:r})),(0,U.aI)(a)}let We,Je=0;async function Xe({action:e="auto",activeTab:t=null,showContribPage:n=!0}={}){if(await async function({valueChange:e=1,maxUseCount:t=1/0,minInterval:n=0}={}){if(Date.now()-Je>=n){Je=Date.now();const{useCount:n}=await F.Ay.get("useCount");n<t?await F.Ay.set({useCount:n+e}):n>t&&await F.Ay.set({useCount:t})}}({valueChange:1,maxUseCount:1e3,minInterval:6e4}),n)return async function({minUseCount:e=0,minInstallDays:t=0,minLastOpenDays:n=0,minLastAutoOpenDays:r=0,action:a="auto",activeTab:s=null}={}){if(Me.ZY){const i=await F.Ay.get(["showContribPage","useCount","installTime","contribPageLastOpen","contribPageLastAutoOpen"]),o=(0,U.I4)();if(i.showContribPage&&i.useCount>=e&&o-i.installTime>=864e5*t&&o-i.contribPageLastOpen>=864e5*n&&o-i.contribPageLastAutoOpen>=864e5*r)return await F.Ay.set({contribPageLastOpen:o,contribPageLastAutoOpen:o}),async function({action:e="",updateStats:t=!0,getTab:n=!1,activeTab:r=null}={}){t&&await F.Ay.set({contribPageLastOpen:(0,U.I4)()});let a=browser.runtime.getURL("/src/contribute/index.html");return e&&(a=`${a}?action=${e}`),Ze({url:a,getTab:n,activeTab:r})}({action:a,updateStats:!1,activeTab:s,getTab:!0})}}({minUseCount:10,minInstallDays:14,minLastOpenDays:14,minLastAutoOpenDays:365,activeTab:t,action:e})}const Ye=new class extends e{#t;#n;#r=0;#a;#s;#i=0;#o;#c;#e;#u;#l=0;#f;#d;#p;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:i,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#t=e.carryoverConcurrencyCount,this.#n=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#a=e.intervalCap,this.#s=e.interval,this.#e=new e.queueClass,this.#u=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#p=!0===e.throwOnTimeout,this.#d=!1===e.autoStart}get#h(){return this.#n||this.#r<this.#a}get#v(){return this.#l<this.#f}#y(){this.#l--,this.#b(),this.emit("next")}#g(){this.#w(),this.#m(),this.#c=void 0}get#_(){const e=Date.now();if(void 0===this.#o){const t=this.#i-e;if(!(t<0))return void 0===this.#c&&(this.#c=setTimeout((()=>{this.#g()}),t)),!0;this.#r=this.#t?this.#l:0}return!1}#b(){if(0===this.#e.size)return this.#o&&clearInterval(this.#o),this.#o=void 0,this.emit("empty"),0===this.#l&&this.emit("idle"),!1;if(!this.#d){const e=!this.#_;if(this.#h&&this.#v){const t=this.#e.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#m(),!0)}}return!1}#m(){this.#n||void 0!==this.#o||(this.#o=setInterval((()=>{this.#w()}),this.#s),this.#i=Date.now()+this.#s)}#w(){0===this.#r&&0===this.#l&&this.#o&&(clearInterval(this.#o),this.#o=void 0),this.#r=this.#t?this.#l:0,this.#T()}#T(){for(;this.#b(););}get concurrency(){return this.#f}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#f=e,this.#T()}async#I(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,n={}){return n={timeout:this.timeout,throwOnTimeout:this.#p,...n},new Promise(((r,a)=>{this.#e.enqueue((async()=>{this.#l++,this.#r++;try{n.signal?.throwIfAborted();let a=e({signal:n.signal});n.timeout&&(a=function(e,n){const{milliseconds:r,fallback:a,message:i,customTimers:o={setTimeout,clearTimeout}}=n;let c;const u=new Promise(((u,l)=>{if("number"!=typeof r||1!==Math.sign(r))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(n.signal){const{signal:e}=n;e.aborted&&l(s(e)),e.addEventListener("abort",(()=>{l(s(e))}))}if(r===Number.POSITIVE_INFINITY)return void e.then(u,l);const f=new t;c=o.setTimeout.call(void 0,(()=>{if(a)try{u(a())}catch(e){l(e)}else"function"==typeof e.cancel&&e.cancel(),!1===i?u():i instanceof Error?l(i):(f.message=i??`Promise timed out after ${r} milliseconds`,l(f))}),r),(async()=>{try{u(await e)}catch(e){l(e)}})()})).finally((()=>{u.clear()}));return u.clear=()=>{o.clearTimeout.call(void 0,c),c=void 0},u}(Promise.resolve(a),{milliseconds:n.timeout})),n.signal&&(a=Promise.race([a,this.#I(n.signal)]));const i=await a;r(i),this.emit("completed",i)}catch(e){if(e instanceof t&&!n.throwOnTimeout)return void r();a(e),this.emit("error",e)}finally{this.#y()}}),n),this.emit("add"),this.#b()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#d?(this.#d=!1,this.#T(),this):this}pause(){this.#d=!0}clear(){this.#e=new this.#u}async onEmpty(){0!==this.#e.size&&await this.#O("empty")}async onSizeLessThan(e){this.#e.size<e||await this.#O("next",(()=>this.#e.size<e))}async onIdle(){0===this.#l&&0===this.#e.size||await this.#O("idle")}async#O(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))}get size(){return this.#e.size}sizeBy(e){return this.#e.filter(e).length}get pending(){return this.#l}get isPaused(){return this.#d}}({concurrency:1});async function He(e,t=null,n=null){let r;if(t||(t=await F.Ay.get(Ue)),await Xe({showContribPage:"exit"!==t.closeTabs}),"epoch"===t.clearSince)r=0;else{let e;switch(t.clearSince){case"1minute":e=6e4;break;case"3minutes":e=18e4;break;case"10minutes":e=6e5;break;case"30minutes":e=18e5;break;case"1hour":e=36e5;break;case"3hours":e=108e5;break;case"1day":e=864e5;break;case"1week":e=6048e5;break;case"4weeks":e=24192e5;break;case"90days":e=7776e6;break;case"365days":e=31536e6}r=(new Date).getTime()-e}const a={};let s;"allDataTypes"===e?(n||(n=await Re(t)),n.forEach((function(e){a[e]=!0}))):a[e]=!0;const{id:i}=await(0,U.e6)(),o=await(0,U.m0)();if("false"!==t.closeTabs){if(["all","allButActive","exit"].includes(t.closeTabs)){const e=(await browser.tabs.query({lastFocusedWindow:!1})).reduce(((e,n)=>(n.pinned&&!t.closePinnedTabs&&"exit"!==t.closeTabs||e.push(n.id),e)),[]);await browser.tabs.remove(e)}const e=await browser.tabs.query({lastFocusedWindow:!0});let n=[];if(t.closePinnedTabs&&"exit"!==t.closeTabs||(n=e.reduce(((e,t)=>(t.pinned&&e.push(t.id),e)),[])),"all"===t.closeTabs){n.length||o||({id:s}=await browser.tabs.create({active:!1}));const t=e.reduce(((e,t)=>(n.includes(t.id)||e.push(t.id),e)),[]);await browser.tabs.remove(t)}else if("active"===t.closeTabs)n.length||1!==e.length||o||({id:s}=await browser.tabs.create({active:!1})),n.includes(i)||await browser.tabs.remove(i);else if("allButActive"===t.closeTabs){const t=e.reduce(((e,t)=>(n.includes(t.id)||t.id===i||e.push(t.id),e)),[]);await browser.tabs.remove(t)}else"exit"===t.closeTabs&&(o||({id:s}=await browser.tabs.create({url:"about:blank",active:!1})),await browser.tabs.remove(e.map((e=>e.id))))}try{a.localStorage&&r&&"firefox"===Me.Dm&&(await browser.browsingData.removeLocalStorage({}),delete a.localStorage),Object.keys(a).length&&await browser.browsingData.remove({since:r},a)}catch(e){throw await Qe({messageId:"error_dataTypeNotCleared",type:"error"}),e}if("exit"!==t.closeTabs){if(t.notifyOnSuccess&&await Qe({messageId:"info_dataTypeCleared",timeout:6e3}),"false"!==t.reloadTabs)if("all"===t.reloadTabs){const e=[],t=await browser.tabs.query({});for(const n of t)n.id!==s&&e.push(browser.tabs.reload(n.id,{bypassCache:!0}));await Promise.all(e)}else if("active"===t.reloadTabs)["allButActive","false"].includes(t.closeTabs)&&await browser.tabs.reload(i,{bypassCache:!0});else if("allButActive"===t.reloadTabs){const e=[],t=await browser.tabs.query({});for(const n of t)[i,s].includes(n.id)||e.push(browser.tabs.reload(n.id,{bypassCache:!0}));await Promise.all(e)}}else s&&browser.tabs.remove(s)}async function Ge(){const e=await F.Ay.get(Ue),t=await Re(e);if(0===t.length)return void await Qe({messageId:"error_allDataTypesDisabled",type:"error"});let n;n="main"===e.clearAllDataTypesAction&&t.length>1?"allDataTypes":t[0],await He(n,e,t)}async function Ke(){const e=await F.Ay.get(["dataTypes","disabledDataTypes","clearAllDataTypesAction"]),t=await Re(e),n=Me.tn?browser.action:browser.browserAction;1===t.length?(n.setTitle({title:(0,U.q4)(`actionTitle_${t[0]}`)}),n.setPopup({popup:""})):"main"===e.clearAllDataTypesAction&&t.length>1?(n.setTitle({title:(0,U.q4)("actionTitle_allDataTypes")}),n.setPopup({popup:""})):(n.setTitle({title:(0,U.q4)("extensionName")}),0===t.length?n.setPopup({popup:""}):n.setPopup({popup:"/src/action/index.html"}))}async function et(){await Ye.add(Ke)}async function tt({event:e=""}={}){const t=await async function({event:e=""}={}){We||(We=async function(){const e={install:!1,update:!1,session:!1,setupInstance:!1,setupSession:!1},{storageVersion:t,appVersion:n}=await browser.storage.local.get(["storageVersion","appVersion"]);return t||(e.install=!0),t===Me.QB.local&&n===Me.CU||(e.update=!0),Me.tn&&await async function(){const e=browser.extension.inIncognitoContext,t=e?"privateSession":"session",n=(await browser.storage.session.get(t))[t];if(n||await browser.storage.session.set({[t]:!0}),e)try{if(!await self.caches.has(t))return await self.caches.open(t),!0}catch(e){return!0}if(!n)return!0}()&&(e.session=!0),(e.install||e.update)&&(e.setupInstance=!0),!e.session&&Me.tn||(e.setupSession=!0),e}(),We.events=[]),e&&We.events.push(e);const t=await We;return We.events.includes("install")&&(t.setupInstance=!0),We.events.includes("startup")&&(t.setupSession=!0),t}({event:e});t.setupInstance&&await(0,U.Jh)("setupInstance",(async()=>{await(0,F.XL)()||await M(),t.update&&await async function(){await F.Ay.set({appVersion:Me.CU})}()})),t.setupSession&&await(0,U.Jh)("setupSession",(async()=>{Me.tn&&!await(0,F.XL)({area:"session"})&&await M({area:"session",silent:!0}),await et()}))}Me.tn?browser.action.onClicked.addListener(Ge):browser.browserAction.onClicked.addListener(Ge),browser.runtime.onMessage.addListener((function(e,t,n){return function(e,t){return"safari"===Me.Dm?(e.then((function(e){void 0===e&&(e=null),t(e)})),!0):e}(async function(e,t){if(t.url!==self.location.href)if("samsung"===Me.Dm&&(/^internet-extension:\/\/.*\/src\/action\/index.html/.test(t.tab?.url)&&(t.tab=null),await(0,U.kL)({tab:t.tab})&&(t.tab=await browser.tabs.get(t.tab.id))),"actionPopupSubmit"===e.id)!async function(e){await He(e)}(e.item);else{if("getPlatform"===e.id)return(0,U.uo)();"optionChange"===e.id?await async function(){await et()}():"showPage"===e.id&&await Ze({url:e.url})}}(e,t),n)})),browser.runtime.onInstalled.addListener((async function(e){["install","update"].includes(e.reason)&&await tt({event:"install"})})),browser.runtime.onStartup.addListener((async function(){await tt({event:"startup"})})),tt()})()})();