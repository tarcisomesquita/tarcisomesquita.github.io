(()=>{var e={731:e=>{"use strict";const t=e=>e,o={all:!1,baseUrl:"",msTile:!1};function n(e,t){return t.rel&&"apple-touch-icon"===t.rel||"icon"===t.rel?{href:t.href||null,sizes:t.sizes||""}:e.msTile&&t.name&&"msapplication-TileImage"===t.name?{href:t.content||null,sizes:""}:t.rel&&t.rel.indexOf("icon")&&-1!==t.rel.indexOf("shortcut")?{href:t.href||null,sizes:""}:void 0}function r(e){return e?parseInt(e.split("x")[0]):0}function i(e,t,o){return void 0===o.slice(t+1).find((t=>t.href===e.href))}e.exports=function(e,l){const s=Object.assign({},o,l);return new Promise((o=>{if(!Array.isArray(e))throw new Error("getFavicons first and only argument should be an array of HTML <head> attributes.");o(e.map(n.bind(null,s)).filter((e=>e&&e.href)).sort(((e,t)=>r(t.sizes)-r(e.sizes))).filter(function(e){return e.all?t:(e,t,o)=>""===e.sizes||o.slice(0,t).length<1}(s)).filter(i).map(function(e,o){let n=e.baseUrl;if(!n){const e=o.find((e=>"BASE"===e.nodeName&&e.href));e&&e.href&&(n=e.href)}return n?e=>Object.assign(e,{href:new URL(e.href,n).href}):t}(s,e)))}))}},532:(e,t,o)=>{"use strict";var n;(n="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?o.g:self).Proxy||(n.Proxy=o(780)(),n.Proxy.revocable=n.Proxy.revocable)},780:e=>{e.exports=function(){let e,t=null;function o(e){return!!e&&("object"==typeof e||"function"==typeof e)}function n(e){if(null!==e&&!o(e))throw new TypeError("Object prototype may only be an Object or null: "+e)}const r=Object,i=Boolean(r.create)||!({__proto__:null}instanceof r),l=r.create||(i?function(e){return n(e),{__proto__:e}}:function(e){if(n(e),null===e)throw new SyntaxError("Native Object.create is required to create objects with null prototype");var t=function(){};return t.prototype=e,new t}),s=function(){return null},a=r.getPrototypeOf||([].__proto__===Array.prototype?function(e){const t=e.__proto__;return o(t)?t:null}:s);return e=function(c,u){if(void 0===(this&&this instanceof e?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!o(c)||!o(u))throw new TypeError("Cannot create proxy with a non-object as target or handler");let f=function(){};t=function(){c=null,f=function(e){throw new TypeError(`Cannot perform '${e}' on a proxy that has been revoked`)}},setTimeout((function(){t=null}),0);const d=u;u={get:null,set:null,apply:null,construct:null};for(let e in d){if(!(e in u))throw new TypeError(`Proxy polyfill does not support trap '${e}'`);u[e]=d[e]}"function"==typeof d&&(u.apply=d.apply.bind(d));const p=a(c);let h,y=!1,m=!1;"function"==typeof c?(h=function(){const e=this&&this.constructor===h,t=Array.prototype.slice.call(arguments);return f(e?"construct":"apply"),e&&u.construct?u.construct.call(this,c,t):!e&&u.apply?u.apply(c,this,t):e?(t.unshift(c),new(c.bind.apply(c,t))):c.apply(this,t)},y=!0):c instanceof Array?(h=[],m=!0):h=i||null!==p?l(p):{};const v=u.get?function(e){return f("get"),u.get(this,e,h)}:function(e){return f("get"),this[e]},w=u.set?function(e,t){f("set"),u.set(this,e,t,h)}:function(e,t){f("set"),this[e]=t},b=r.getOwnPropertyNames(c),g={};b.forEach((function(e){if((y||m)&&e in h)return;const t=r.getOwnPropertyDescriptor(c,e),o={enumerable:Boolean(t.enumerable),get:v.bind(c,e),set:w.bind(c,e)};r.defineProperty(h,e,o),g[e]=!0}));let T=!0;if(y||m){const e=r.setPrototypeOf||([].__proto__===Array.prototype?function(e,t){return n(t),e.__proto__=t,e}:s);p&&e(h,p)||(T=!1)}if(u.get||!T)for(let e in c)g[e]||r.defineProperty(h,e,{get:v.bind(c,e)});return r.seal(c),r.seal(h),h},e.revocable=function(o,n){return{proxy:new e(o,n),revoke:t}},e}},196:e=>{!function(){"use strict";e.exports={polyfill:function(){var e=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var o,n=e.HTMLElement||e.Element,r=468,i={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||a,scrollIntoView:n.prototype.scrollIntoView},l=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,s=(o=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(o)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?h.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):i.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?i.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var e=arguments[0].left,t=arguments[0].top;h.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var o=function(e){for(;e!==t.body&&!1===d(e);)e=e.parentNode||e.host;return e}(this),n=o.getBoundingClientRect(),r=this.getBoundingClientRect();o!==t.body?(h.call(this,o,o.scrollLeft+r.left-n.left,o.scrollTop+r.top-n.top),"fixed"!==e.getComputedStyle(o).position&&e.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function a(e,t){this.scrollLeft=e,this.scrollTop=t}function c(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(e,t){return"Y"===t?e.clientHeight+s<e.scrollHeight:"X"===t?e.clientWidth+s<e.scrollWidth:void 0}function f(t,o){var n=e.getComputedStyle(t,null)["overflow"+o];return"auto"===n||"scroll"===n}function d(e){var t=u(e,"Y")&&f(e,"Y"),o=u(e,"X")&&f(e,"X");return t||o}function p(t){var o,n,i,s,a=(l()-t.startTime)/r;s=a=a>1?1:a,o=.5*(1-Math.cos(Math.PI*s)),n=t.startX+(t.x-t.startX)*o,i=t.startY+(t.y-t.startY)*o,t.method.call(t.scrollable,n,i),n===t.x&&i===t.y||e.requestAnimationFrame(p.bind(e,t))}function h(o,n,r){var s,c,u,f,d=l();o===t.body?(s=e,c=e.scrollX||e.pageXOffset,u=e.scrollY||e.pageYOffset,f=i.scroll):(s=o,c=o.scrollLeft,u=o.scrollTop,f=a),p({scrollable:s,method:f,startTime:d,startX:c,startY:u,x:n,y:r})}}}}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(196),t=o.n(e);o(532);try{t().polyfill()}catch(e){console.log(e)}let n;function r(e,t){var o=document.createRange(),n=window.getSelection();o.setStart(e,t),o.collapse(!0),n.removeAllRanges(),n.addRange(o)}n=window,Array.from||(Array.from=function(){let e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},o=Math.pow(2,53)-1;return function(e){let n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");let r,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}let l,s=function(e){let t=function(e){let t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),o)}(n.length),a=t(this)?Object(new this(s)):new Array(s),c=0;for(;c<s;)l=n[c],a[c]=i?void 0===r?i(l,c):i.call(r,l,c):l,c+=1;return a.length=s,a}}()),n.t_delay=e=>new Promise((t=>setTimeout(t,e))),n.t_in=(e,t)=>e.hasOwnProperty(t),n.t_arrayBufferToBase64=function(e){let t="";return[].slice.call(new Uint8Array(e)).forEach((e=>t+=String.fromCharCode(e))),n.btoa(t)},n.t_getImage=function(e,t=!1){return new Promise(((o,n)=>{try{if(e.startsWith("chrome://"))o();else{let r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){let e=r.getResponseHeader("Content-Type").trim();if(e.startsWith("image/")){let t="data:"+e+";charset=utf-8;base64,",n=t_arrayBufferToBase64(r.response);o(t+n)}else n('Image Request Failed: Content-Type is not an image! (Content-Type: "'+e+'")')}else n(this.status)},r.responseType="arraybuffer",r.open("GET",e,!0),t&&r.setRequestHeader("Cache-Control","no-store"),r.send()}}catch(e){n(e.message)}}))},n.t_ctrlCmdKey=function(){return navigator.platform.indexOf("Mac")>=0||"iPhone"===navigator.platform?"Meta":"Control"},n.t_getElementsBetween=function(e,t,o=e=>!0){if(!e.parentElement.isSameNode(t.parentElement))return;if(e.isSameNode(t))return[];let n=[],r=e=>e.nextElementSibling;e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING&&(r=e=>e.previousElementSibling);let i=r(e);for(;i&&!i.isSameNode(t);)o(i)&&n.push(i),i=r(i);return n},n.t_getInView=function(e,t,o){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();(n.y>r.y||n.y>r.y+r.height||r.y>=n.y+n.height||r.y+r.height>=n.y+n.height)&&e.scrollIntoView(o)},n.t_getCaretPosition=function(e){var t,o=0,n=e.ownerDocument||e.document,r=n.defaultView||n.parentWindow;if(void 0!==r.getSelection){if((t=r.getSelection()).rangeCount>0){var i=r.getSelection().getRangeAt(0),l=i.cloneRange();l.selectNodeContents(e),l.setEnd(i.endContainer,i.endOffset),o=l.toString().length}}else if((t=n.selection)&&"Control"!=t.type){var s=t.createRange(),a=n.body.createTextRange();a.moveToElementText(e),a.setEndPoint("EndToEnd",s),o=a.text.length}return o},n.t_setCaretPosition=function(e,t){let o=0,n=t;for(let i of e.childNodes)if(i.nodeType===Node.TEXT_NODE){if(o+=i.nodeValue.length,t<=o)return void r(i,n);n-=i.nodeValue.length}else if(i.nodeType===Node.ELEMENT_NODE){let e=i.innerText;if(o+=e.length,t<=o)return void t_setCaretPosition(i,n);n-=e.length}},n.t_stripHtml=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},n.t_byteLen=e=>new Blob([e]).size,n.t_chunkSubstr=function(e,t){const o=Math.ceil(e.length/t),n=new Array(o);for(let r=0,i=0;r<o;++r,i+=t)n[r]=e.substr(i,t);return n},n.t_chunkBytes=function(e,t){let o=Math.ceil(t_byteLen(e)/t),n=new Array(o),r=0;n[r]="";for(const o of e){let e=n[r]+o;t_byteLen(e)>t?(r++,r>=n.length&&n.push(""),n[r]=o):n[r]=e}return n},n.t_browserDetection=function(){return browser.runtime.getURL("/").startsWith("moz")?"moz":"chromium"},n.t_getKeyboardFocusableElements=(e=document)=>[...e.querySelectorAll('a[href], button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')].filter((e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden"))),n.t_resetAnimation=function(e){e.style.animation="none",e.offsetHeight,e.style.animation=null},n.t_tryParseJSONObject=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t)return t}catch(e){}return!1},n.t_sanitizeXMLTags=function(e){return e.replace(/<\/?([a-zA-Z0-9]+)>/g,(e=>e.replace("<","&lt;").replace(">","&gt;")))},n.t_errorToString=e=>`${e.toString()}\n${e.stack||"No stack trace available."}`;let i={};function l(e,t){if(void 0!==i[e])throw new Error("Module already exists");i[e]=t}browser.runtime.onMessage.addListener(((e,t)=>{let o=i[e.target];if(void 0!==o)return o(e.data)}));var s=o(731),a=o.n(s);const c={"www.youtube.com":()=>new Promise((async(e,t)=>{if(window.location.pathname.startsWith("/watch")){let t=document.querySelector("ytd-watch-metadata");if(t){let n=await(o=t,new Promise(((e,t)=>{let n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==n?new n((t=>{e(o.textContent)})).observe(o,{attributes:!1,childList:!0,subtree:!0,characterData:!1}):t(new TypeError("MutationObservers are not supported on this browser!"))})));e(n)}else{let t=await new Promise(((e,t)=>{let o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(void 0!==o){let t=new o((o=>{let n=document.querySelector("ytd-watch-metadata");n&&(t.disconnect(),e(n))}));t.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1})}else t(new TypeError("MutationObservers are not supported on this browser!"))}));e(t.textContent)}}else e(document.body.innerText);var o}))};function u(){let e=document.title,t=window.location.href,o=document.querySelector("meta[name='description']");o=o?o.getAttribute("content"):"<same as title> "+e;let n=document.querySelectorAll(":not(aside):not(header):not(footer):not(nav) h1, :not(aside):not(header):not(footer):not(nav) h2, :not(aside):not(header):not(footer):not(nav) h3, article section:not(aside):not(header):not(footer):not(nav)"),r="";for(let e of n)r+=e.innerText,r+="\n\n";let i=document.querySelectorAll("article section:not(aside):not(header):not(footer):not(nav) img[alt]"),l="";for(let e of i)l+=e.alt,l+="\n\n";return e+"\n"+t+"\n"+o+"\n\n"+r+l}l("packd",(e=>{switch(e.action){case"pack":return Promise.resolve(Object.assign({packContents:{scroll:!0,videoStats:!0}},{scrollTop:document.documentElement.scrollTop||document.body.scrollTop,scrollLeft:document.documentElement.scrollLeft||document.body.scrollLeft},{videos:Array.from(document.querySelectorAll("video")).map((e=>({currentTime:e.currentTime})))}));case"unpack":return new Promise(((t,o)=>{let n=()=>{console.log("Unpacking"),console.log(e),e.packContents.scroll&&function(e){document.documentElement.scrollTo(e.scrollLeft,e.scrollTop)}(e),e.packContents.videoStats&&function(e){let t=document.querySelectorAll("video");if(e.videos.length===t.length)for(let o=0;o<t.length;o++)t[o].currentTime=e.videos[o].currentTime}(e),t()};"loading"===document.readyState?document.addEventListener("load",n):n()}));case"favicon":return a()(Array.from(document.querySelectorAll("base, link, meta")).map((e=>{let t=e.attributes,o={};for(let e of t)o[e.name]=e.value;return Object.assign(o,{nodeName:e.nodeName.toLocaleUpperCase(),innerText:e.innerText})})));case"innerText":return window.location.hostname in c&&c.hasOwnProperty(window.location.hostname)?c[window.location.hostname]().then((e=>({title:document.title,url:window.location.href,innerText:e}))):Promise.resolve({title:document.title,url:window.location.href,innerText:u()})}}));const f=["Meta","Control","Shift","Enter","Delete","Escape","ArrowUp","ArrowDown","a","A","i","I","s","S","m","M","p","P"];let d,p=[];function h(e,t){return browser.runtime.sendMessage({_:"initialKeyEventsPassthrough",type:e,key:t})}function y(e){if(e.isTrusted&&("keydown"===e.type||"keyup"===e.type)&&-1!=f.indexOf(e.key))if(e.preventDefault(),e.stopImmediatePropagation(),h(e.type,e.key),"keydown"===e.type)p.push(e.key);else if("keyup"===e.type){let t=p.indexOf(e.key);-1!==t&&p.splice(t,1)}}l("focusd",(e=>{if(e&&"checkPrevious"===e.action){if(d){let e=d();return d=void 0,Promise.resolve(e)}return Promise.resolve()}{window.blur();for(let e of t_getKeyboardFocusableElements())e.blur();document.addEventListener("keydown",y),document.addEventListener("keyup",y);let e=!1,t=o=>e?Promise.resolve():(document.removeEventListener("keydown",y),document.removeEventListener("keyup",y),document.removeEventListener("mousedown",t),e=!0,Promise.all(p.splice(0,p.length).map((e=>h("keyup",e)))).then((()=>h("passthroughover",void 0))));return d=t,document.addEventListener("mousedown",t),Promise.resolve()}}))})()})();